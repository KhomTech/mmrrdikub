# üìò ‡∏Ñ‡∏π‡πà‡∏°‡∏∑‡∏≠‡∏™‡∏±‡∏°‡∏†‡∏≤‡∏©‡∏ì‡πå‡∏á‡∏≤‡∏ô MMRRDiKub ‚Äî ‡∏â‡∏ö‡∏±‡∏ö‡∏™‡∏°‡∏ö‡∏π‡∏£‡∏ì‡πå

> **‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö**: ‡πÄ‡∏ï‡∏£‡∏µ‡∏¢‡∏°‡∏ï‡∏±‡∏ß‡∏û‡∏£‡∏µ‡πÄ‡∏ã‡∏ô‡∏ï‡πå‡πÇ‡∏õ‡∏£‡πÄ‡∏à‡∏Ñ‡πÅ‡∏•‡∏∞‡∏ï‡∏≠‡∏ö‡∏Ñ‡∏≥‡∏ñ‡∏≤‡∏°‡∏™‡∏±‡∏°‡∏†‡∏≤‡∏©‡∏ì‡πå‡∏ó‡∏∏‡∏Å‡πÄ‡∏£‡∏∑‡πà‡∏≠‡∏á
> **‡πÄ‡∏ß‡∏≠‡∏£‡πå‡∏ä‡∏±‡∏ô**: 1.0 | **‡∏≠‡∏±‡∏õ‡πÄ‡∏î‡∏ï**: ‡∏°‡∏µ‡∏ô‡∏≤‡∏Ñ‡∏° 2026
> **‡∏≠‡πà‡∏≤‡∏ô‡πÅ‡∏•‡πâ‡∏ß‡∏ï‡πâ‡∏≠‡∏á**: ‡∏≠‡∏ò‡∏¥‡∏ö‡∏≤‡∏¢‡πÑ‡∏î‡πâ‡∏ó‡∏∏‡∏Å‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô ‡∏ó‡∏∏‡∏Å‡πÇ‡∏•‡∏à‡∏¥‡∏Å ‡πÄ‡∏õ‡∏¥‡∏î‡πÇ‡∏Ñ‡πâ‡∏î‡πÉ‡∏´‡πâ‡∏î‡∏π‡πÑ‡∏î‡πâ

---

## üìã ‡∏™‡∏≤‡∏£‡∏ö‡∏±‡∏ç

1. [‡∏†‡∏≤‡∏û‡∏£‡∏ß‡∏°‡πÇ‡∏õ‡∏£‡πÄ‡∏à‡∏Ñ (Overview)](#1-‡∏†‡∏≤‡∏û‡∏£‡∏ß‡∏°‡πÇ‡∏õ‡∏£‡πÄ‡∏à‡∏Ñ)
2. [‡πÇ‡∏Ñ‡∏£‡∏á‡∏™‡∏£‡πâ‡∏≤‡∏á‡πÇ‡∏ü‡∏•‡πÄ‡∏î‡∏≠‡∏£‡πå (Project Structure)](#2-‡πÇ‡∏Ñ‡∏£‡∏á‡∏™‡∏£‡πâ‡∏≤‡∏á‡πÇ‡∏ü‡∏•‡πÄ‡∏î‡∏≠‡∏£‡πå)
3. [üê≥ Docker & Multi-Stage Build](#3-docker--multi-stage-build)
4. [‚ö° Go Fiber Backend ‚Äî ‡∏ó‡∏∏‡∏Å‡πÑ‡∏ü‡∏•‡πå ‡∏ó‡∏∏‡∏Å‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô](#4-go-fiber-backend)
5. [üåê Next.js Frontend ‚Äî Components & Logic](#5-nextjs-frontend)
6. [ü§ñ AI Risk Analyst ‚Äî RAG Pipeline & Fallback](#6-ai-risk-analyst)
7. [üóÑÔ∏è Database Design ‚Äî PostgreSQL & GORM](#7-database-design)
8. [üîê Security ‚Äî JWT, bcrypt, Middleware](#8-security)
9. [üöÄ Deployment ‚Äî Render, Vercel, Domain](#9-deployment)
10. [üé§ ‡∏Ñ‡∏≥‡∏ñ‡∏≤‡∏°‡∏™‡∏±‡∏°‡∏†‡∏≤‡∏©‡∏ì‡πå‡∏à‡∏≥‡∏•‡∏≠‡∏á + ‡∏Ñ‡∏≥‡∏ï‡∏≠‡∏ö](#10-‡∏Ñ‡∏≥‡∏ñ‡∏≤‡∏°‡∏™‡∏±‡∏°‡∏†‡∏≤‡∏©‡∏ì‡πå‡∏à‡∏≥‡∏•‡∏≠‡∏á)

---

## 1. ‡∏†‡∏≤‡∏û‡∏£‡∏ß‡∏°‡πÇ‡∏õ‡∏£‡πÄ‡∏à‡∏Ñ

### ‡∏°‡∏±‡∏ô‡∏Ñ‡∏∑‡∏≠‡∏≠‡∏∞‡πÑ‡∏£?
MMRRDiKub = **‡πÄ‡∏Ñ‡∏£‡∏∑‡πà‡∏≠‡∏á‡∏°‡∏∑‡∏≠‡πÄ‡∏ó‡∏£‡∏î Crypto ‡∏£‡∏∞‡∏î‡∏±‡∏ö Production** ‡∏ó‡∏µ‡πà‡∏°‡∏µ 3 ‡∏ü‡∏µ‡πÄ‡∏à‡∏≠‡∏£‡πå‡∏´‡∏•‡∏±‡∏Å:
1. **Position Size Calculator** ‚Äî ‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì‡∏Ç‡∏ô‡∏≤‡∏î Order ‡πÅ‡∏ö‡∏ö Multi-SL/TP + Fee-Adjusted
2. **Trading Journal** ‚Äî ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏õ‡∏£‡∏∞‡∏ß‡∏±‡∏ï‡∏¥‡πÄ‡∏ó‡∏£‡∏î‡∏û‡∏£‡πâ‡∏≠‡∏° CRUD ‡πÄ‡∏ï‡πá‡∏°‡∏£‡∏π‡∏õ‡πÅ‡∏ö‡∏ö
3. **AI Risk Analyst** ‚Äî ‡∏ß‡∏¥‡πÄ‡∏Ñ‡∏£‡∏≤‡∏∞‡∏´‡πå‡πÅ‡∏ú‡∏ô‡πÄ‡∏ó‡∏£‡∏î‡∏î‡πâ‡∏ß‡∏¢ AI + ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏• Real-time (RAG)

### Tech Stack ‡∏ó‡∏µ‡πà‡πÉ‡∏ä‡πâ‡∏à‡∏£‡∏¥‡∏á

| ‡∏™‡πà‡∏ß‡∏ô | ‡πÄ‡∏ó‡∏Ñ‡πÇ‡∏ô‡πÇ‡∏•‡∏¢‡∏µ | ‡∏ó‡∏≥‡πÑ‡∏°‡∏ñ‡∏∂‡∏á‡πÄ‡∏•‡∏∑‡∏≠‡∏Å |
|------|-----------|-------------|
| **Frontend** | Next.js 16 (React) + TypeScript | SSR, SEO ‡∏î‡∏µ, Ecosystem ‡πÉ‡∏´‡∏ç‡πà |
| **Styling** | Tailwind CSS v4 | Utility-first, ‡πÄ‡∏Ç‡∏µ‡∏¢‡∏ô‡πÄ‡∏£‡πá‡∏ß |
| **Backend** | Go 1.24 + Fiber v2 | ‡πÄ‡∏£‡πá‡∏ß‡∏Å‡∏ß‡πà‡∏≤ Express 5-10x, Compile ‡πÄ‡∏õ‡πá‡∏ô Binary |
| **Database** | PostgreSQL (Neon.tech) | Relational, ACID, ‡∏ü‡∏£‡∏µ Cloud |
| **ORM** | GORM v1.25 | Auto-migrate, Query Builder |
| **AI** | Google Gemini API + Pollinations (Backup) | LLM ‡∏ß‡∏¥‡πÄ‡∏Ñ‡∏£‡∏≤‡∏∞‡∏´‡πå‡πÄ‡∏ó‡∏£‡∏î |
| **Auth** | JWT (stateless) + bcrypt | Scalable, ‡πÑ‡∏°‡πà‡∏ï‡πâ‡∏≠‡∏á‡πÄ‡∏Å‡πá‡∏ö session |
| **Deploy** | Docker (Render.com) + Vercel | Container backend, Edge frontend |
| **API ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•** | Binance API (‡∏£‡∏≤‡∏Ñ‡∏≤) + CryptoPanic API (‡∏Ç‡πà‡∏≤‡∏ß) | ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏• Real-time |

---

## 2. ‡πÇ‡∏Ñ‡∏£‡∏á‡∏™‡∏£‡πâ‡∏≤‡∏á‡πÇ‡∏ü‡∏•‡πÄ‡∏î‡∏≠‡∏£‡πå

```
mmrrdikub/
‚îú‚îÄ‚îÄ backend/                    ‚Üê ‚ö° Go Fiber API Server
‚îÇ   ‚îú‚îÄ‚îÄ cmd/api/
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ main.go             ‚Üê Entry Point (‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤ Server, Routes, Middleware)
‚îÇ   ‚îú‚îÄ‚îÄ internal/handlers/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ auth.go             ‚Üê Register, Login, JWT Token
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ trade.go            ‚Üê CRUD Trading Journal
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ ai.go               ‚Üê AI Risk Analyst + RAG Pipeline
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ middleware.go       ‚Üê JWT Guard (‡∏ï‡∏£‡∏ß‡∏à Token)
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ forgot_password.go  ‚Üê Forgot Password + Email OTP
‚îÇ   ‚îú‚îÄ‚îÄ pkg/database/
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ postgres.go         ‚Üê ‡πÄ‡∏ä‡∏∑‡πà‡∏≠‡∏° PostgreSQL + Connection Pool
‚îÇ   ‚îú‚îÄ‚îÄ Dockerfile              ‚Üê Multi-stage Build (‡πÄ‡∏•‡πá‡∏Å ~15MB)
‚îÇ   ‚îú‚îÄ‚îÄ go.mod                  ‚Üê Dependencies ‡∏Ç‡∏≠‡∏á Go
‚îÇ   ‚îî‚îÄ‚îÄ .env                    ‚Üê Secrets (‡∏´‡πâ‡∏≤‡∏° commit!)
‚îÇ
‚îú‚îÄ‚îÄ frontend/                   ‚Üê üåê Next.js Application
‚îÇ   ‚îú‚îÄ‚îÄ app/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ components/
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ Calculator.tsx  ‚Üê Position Size Calculator (‡∏≠‡∏•‡∏±‡∏á 1000+ ‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î)
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ Dashboard.tsx   ‚Üê ‡∏´‡∏ô‡πâ‡∏≤ Dashboard ‡∏´‡∏•‡∏±‡∏Å
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ AiChat.tsx      ‚Üê AI Chatbot Interface
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ AIInsights.tsx  ‚Üê AI ‡∏ß‡∏¥‡πÄ‡∏Ñ‡∏£‡∏≤‡∏∞‡∏´‡πå‡∏û‡∏§‡∏ï‡∏¥‡∏Å‡∏£‡∏£‡∏°
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ Navbar.tsx      ‚Üê Navigation Bar
‚îÇ   ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ PriceTicker.tsx ‚Üê ‡∏£‡∏≤‡∏Ñ‡∏≤ Crypto Real-time
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ utils/
‚îÇ   ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ api.ts          ‚Üê Axios Instance + API Functions
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ context/
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ ThemeContext.tsx ‚Üê Dark/Light Mode
‚îÇ   ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ LanguageContext.tsx ‚Üê TH/EN
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ login/page.tsx      ‚Üê ‡∏´‡∏ô‡πâ‡∏≤ Login
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ register/page.tsx   ‚Üê ‡∏´‡∏ô‡πâ‡∏≤‡∏™‡∏°‡∏±‡∏Ñ‡∏£‡∏™‡∏°‡∏≤‡∏ä‡∏¥‡∏Å
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ dashboard/page.tsx  ‚Üê ‡∏´‡∏ô‡πâ‡∏≤ Dashboard (Protected)
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ layout.tsx          ‚Üê Root Layout (Font, Provider)
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ page.tsx            ‚Üê ‡∏´‡∏ô‡πâ‡∏≤‡πÅ‡∏£‡∏Å (Calculator)
‚îÇ   ‚îú‚îÄ‚îÄ public/                 ‚Üê Static files (favicon, Google verify)
‚îÇ   ‚îú‚îÄ‚îÄ postcss.config.mjs      ‚Üê Tailwind CSS config
‚îÇ   ‚îú‚îÄ‚îÄ next.config.ts          ‚Üê Next.js config
‚îÇ   ‚îî‚îÄ‚îÄ package.json            ‚Üê NPM Dependencies
‚îÇ
‚îî‚îÄ‚îÄ .gitignore                  ‚Üê ‡∏Å‡∏±‡∏ô Secrets ‡∏´‡∏•‡∏∏‡∏î
```

**‡∏ß‡∏¥‡∏ò‡∏µ‡∏≠‡∏ò‡∏¥‡∏ö‡∏≤‡∏¢‡∏ï‡∏≠‡∏ô‡∏™‡∏±‡∏°‡∏†‡∏≤‡∏©‡∏ì‡πå:**
> "‡∏ú‡∏°‡πÅ‡∏¢‡∏Å‡πÇ‡∏õ‡∏£‡πÄ‡∏à‡∏Ñ‡πÄ‡∏õ‡πá‡∏ô 2 ‡∏™‡πà‡∏ß‡∏ô‡∏ä‡∏±‡∏î‡πÄ‡∏à‡∏ô‡∏Ñ‡∏£‡∏±‡∏ö ‚Äî `backend/` ‡πÄ‡∏õ‡πá‡∏ô Go API Server ‡πÅ‡∏•‡∏∞ `frontend/` ‡πÄ‡∏õ‡πá‡∏ô Next.js ‡πÇ‡∏î‡∏¢‡πÉ‡∏ä‡πâ **Monorepo** ‡∏á‡πà‡∏≤‡∏¢‡πÜ ‡∏ó‡∏µ‡πà‡∏ó‡∏≥‡∏á‡∏≤‡∏ô‡πÅ‡∏¢‡∏Å‡∏Å‡∏±‡∏ô‡πÄ‡∏î‡πá‡∏î‡∏Ç‡∏≤‡∏î‡∏ú‡πà‡∏≤‡∏ô REST API ‡∏ó‡∏≥‡πÉ‡∏´‡πâ‡πÅ‡∏ï‡πà‡∏•‡∏∞‡∏ù‡∏±‡πà‡∏á Scale ‡πÑ‡∏î‡πâ‡∏≠‡∏¥‡∏™‡∏£‡∏∞‡∏Ñ‡∏£‡∏±‡∏ö"

---

## 3. üê≥ Docker & Multi-Stage Build

### ‡πÑ‡∏ü‡∏•‡πå: `backend/Dockerfile`
Docker ‡∏Ñ‡∏∑‡∏≠ **‡∏Å‡∏•‡πà‡∏≠‡∏á‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à‡∏£‡∏π‡∏õ** ‡∏ó‡∏µ‡πà‡πÄ‡∏£‡∏≤‡∏à‡∏∞‡∏¢‡∏±‡∏î‡πÇ‡∏õ‡∏£‡πÅ‡∏Å‡∏£‡∏°‡∏•‡∏á‡πÑ‡∏õ ‡πÇ‡∏õ‡∏£‡πÅ‡∏Å‡∏£‡∏°‡∏à‡∏∞‡∏ó‡∏≥‡∏á‡∏≤‡∏ô‡πÄ‡∏´‡∏°‡∏∑‡∏≠‡∏ô‡∏Å‡∏±‡∏ô‡πÉ‡∏ô‡∏ó‡∏∏‡∏Å‡πÄ‡∏Ñ‡∏£‡∏∑‡πà‡∏≠‡∏á ‡πÑ‡∏°‡πà‡∏ß‡πà‡∏≤‡∏à‡∏∞‡πÄ‡∏õ‡πá‡∏ô Mac, Windows, ‡∏´‡∏£‡∏∑‡∏≠ Server ‡∏ö‡∏ô Cloud

### Multi-Stage Build ‡∏Ñ‡∏∑‡∏≠‡∏≠‡∏∞‡πÑ‡∏£?
‡∏Ñ‡∏¥‡∏î‡∏†‡∏≤‡∏û‡∏á‡πà‡∏≤‡∏¢‡πÜ ‡πÄ‡∏´‡∏°‡∏∑‡∏≠‡∏ô **‡πÇ‡∏£‡∏á‡∏á‡∏≤‡∏ô‡∏ú‡∏•‡∏¥‡∏ï‡∏£‡∏ñ‡∏¢‡∏ô‡∏ï‡πå**:
- **Stage 1 (Builder)** = ‡πÇ‡∏£‡∏á‡∏á‡∏≤‡∏ô ‚Äî ‡πÉ‡∏´‡∏ç‡πà‡∏°‡∏≤‡∏Å ‡∏°‡∏µ‡πÄ‡∏Ñ‡∏£‡∏∑‡πà‡∏≠‡∏á‡∏°‡∏∑‡∏≠‡πÄ‡∏ï‡πá‡∏° (Go Compiler, Git ‡∏Ø‡∏•‡∏Ø) ‡πÉ‡∏ä‡πâ **‡∏õ‡∏£‡∏∞‡∏Å‡∏≠‡∏ö‡∏£‡∏ñ**
- **Stage 2 (Runtime)** = ‡∏ñ‡∏ô‡∏ô‡∏à‡∏£‡∏¥‡∏á ‚Äî ‡πÄ‡∏≠‡∏≤‡πÅ‡∏Ñ‡πà **‡∏ï‡∏±‡∏ß‡∏£‡∏ñ** ‡∏ó‡∏µ‡πà‡∏õ‡∏£‡∏∞‡∏Å‡∏≠‡∏ö‡πÄ‡∏™‡∏£‡πá‡∏à‡πÑ‡∏õ‡∏ß‡∏¥‡πà‡∏á ‡πÑ‡∏°‡πà‡∏ï‡πâ‡∏≠‡∏á‡πÄ‡∏≠‡∏≤‡πÇ‡∏£‡∏á‡∏á‡∏≤‡∏ô‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏•‡∏±‡∏á‡πÑ‡∏õ‡∏î‡πâ‡∏ß‡∏¢!

### ‡πÇ‡∏Ñ‡πâ‡∏î‡∏à‡∏£‡∏¥‡∏á‡∏û‡∏£‡πâ‡∏≠‡∏°‡∏≠‡∏ò‡∏¥‡∏ö‡∏≤‡∏¢

```dockerfile
# ‚ïî‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïó
# ‚ïë   STAGE 1: BUILD (‡πÇ‡∏£‡∏á‡∏á‡∏≤‡∏ô‡∏õ‡∏£‡∏∞‡∏Å‡∏≠‡∏ö)       ‚ïë
# ‚ïë   Image ‡∏Ç‡∏ô‡∏≤‡∏î ~1GB (‡πÉ‡∏´‡∏ç‡πà‡∏°‡∏≤‡∏Å!)        ‚ïë
# ‚ïö‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïù

FROM golang:1.24-alpine AS builder
# ‚Üë ‡∏î‡∏≤‡∏ß‡∏ô‡πå‡πÇ‡∏´‡∏•‡∏î Go Compiler ‡πÄ‡∏ß‡∏≠‡∏£‡πå‡∏ä‡∏±‡∏ô 1.24 ‡∏ö‡∏ô Alpine Linux (‡πÄ‡∏ö‡∏≤)
# "AS builder" = ‡∏ï‡∏±‡πâ‡∏á‡∏ä‡∏∑‡πà‡∏≠‡∏ß‡πà‡∏≤ "builder" ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÄ‡∏£‡∏µ‡∏¢‡∏Å‡πÉ‡∏ä‡πâ‡πÉ‡∏ô Stage 2

RUN apk add --no-cache git
# ‚Üë ‡∏ï‡∏¥‡∏î‡∏ï‡∏±‡πâ‡∏á Git (‡∏ö‡∏≤‡∏á Go package ‡∏ï‡πâ‡∏≠‡∏á‡πÉ‡∏ä‡πâ‡∏î‡∏∂‡∏á‡∏à‡∏≤‡∏Å GitHub)

WORKDIR /app
# ‚Üë ‡∏™‡∏£‡πâ‡∏≤‡∏á‡πÇ‡∏ü‡∏•‡πÄ‡∏î‡∏≠‡∏£‡πå /app ‡πÅ‡∏•‡πâ‡∏ß‡πÄ‡∏Ç‡πâ‡∏≤‡πÑ‡∏õ‡∏ó‡∏≥‡∏á‡∏≤‡∏ô

COPY go.mod go.sum ./
RUN go mod download
# ‚Üë ‚≠ê TRICK ‡∏™‡∏≥‡∏Ñ‡∏±‡∏ç! ‡∏Å‡πä‡∏≠‡∏õ go.mod ‡∏Å‡πà‡∏≠‡∏ô‡πÅ‡∏•‡πâ‡∏ß download dependencies
# ‡∏ó‡∏≥‡πÑ‡∏°? ‡πÄ‡∏û‡∏£‡∏≤‡∏∞ Docker ‡∏°‡∏µ "Layer Caching"
# ‡∏ñ‡πâ‡∏≤ go.mod ‡πÑ‡∏°‡πà‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô = Docker ‡∏à‡∏∞‡∏à‡∏≥‡∏ú‡∏•‡∏•‡∏±‡∏û‡∏ò‡πå‡πÄ‡∏Å‡πà‡∏≤‡πÑ‡∏ß‡πâ ‡πÑ‡∏°‡πà‡∏ï‡πâ‡∏≠‡∏á download ‡πÉ‡∏´‡∏°‡πà!
# ‡∏õ‡∏£‡∏∞‡∏´‡∏¢‡∏±‡∏î‡πÄ‡∏ß‡∏•‡∏≤ Build ‡∏à‡∏≤‡∏Å 5 ‡∏ô‡∏≤‡∏ó‡∏µ ‡πÄ‡∏´‡∏•‡∏∑‡∏≠ 30 ‡∏ß‡∏¥‡∏ô‡∏≤‡∏ó‡∏µ

COPY . .
# ‚Üë ‡∏Å‡πä‡∏≠‡∏õ Source Code ‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î

RUN CGO_ENABLED=0 GOOS=linux go build -o main ./cmd/api/
# ‚Üë Compile Go ‡πÄ‡∏õ‡πá‡∏ô Binary ‡∏ä‡∏∑‡πà‡∏≠ "main"
# CGO_ENABLED=0 = ‡πÑ‡∏°‡πà‡πÉ‡∏ä‡πâ C libraries ‚Üí Binary ‡∏ó‡∏≥‡∏á‡∏≤‡∏ô‡πÄ‡∏î‡∏µ‡πà‡∏¢‡∏ß‡πÑ‡∏î‡πâ‡πÄ‡∏•‡∏¢
# GOOS=linux = Build ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö Linux (Server ‡∏™‡πà‡∏ß‡∏ô‡πÉ‡∏´‡∏ç‡πà‡πÄ‡∏õ‡πá‡∏ô Linux)
# ‡∏ú‡∏•‡∏•‡∏±‡∏û‡∏ò‡πå: ‡πÑ‡∏î‡πâ‡πÑ‡∏ü‡∏•‡πå "main" ‡∏ï‡∏±‡∏ß‡πÄ‡∏î‡∏µ‡∏¢‡∏ß ‡∏Ç‡∏ô‡∏≤‡∏î‡πÅ‡∏Ñ‡πà ~15MB!


# ‚ïî‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïó
# ‚ïë   STAGE 2: RUNTIME (‡∏™‡πà‡∏á‡∏ï‡∏±‡∏ß‡∏£‡∏ñ‡∏≠‡∏≠‡∏Å‡∏ß‡∏¥‡πà‡∏á)  ‚ïë
# ‚ïë   Image ‡∏Ç‡∏ô‡∏≤‡∏î ~15MB ‡πÄ‡∏ó‡πà‡∏≤‡∏ô‡∏±‡πâ‡∏ô!          ‚ïë
# ‚ïö‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïù

FROM alpine:3.19
# ‚Üë ‡πÉ‡∏ä‡πâ Alpine Linux ‡πÄ‡∏õ‡∏•‡πà‡∏≤‡πÜ ‡∏Ç‡∏ô‡∏≤‡∏î‡πÅ‡∏Ñ‡πà 5MB!
# ‡πÑ‡∏°‡πà‡∏°‡∏µ Go Compiler ‡πÑ‡∏°‡πà‡∏°‡∏µ Git ‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏≠‡∏∞‡πÑ‡∏£‡πÄ‡∏•‡∏¢ ‚Üí ‡∏õ‡∏•‡∏≠‡∏î‡∏†‡∏±‡∏¢!

RUN apk --no-cache add ca-certificates tzdata
# ‚Üë ‡∏ï‡∏¥‡∏î‡∏ï‡∏±‡πâ‡∏á‡πÅ‡∏Ñ‡πà 2 ‡∏≠‡∏¢‡πà‡∏≤‡∏á:
# ca-certificates = ‡πÉ‡∏ö‡∏£‡∏±‡∏ö‡∏£‡∏≠‡∏á SSL (‡∏ï‡πâ‡∏≠‡∏á‡∏°‡∏µ‡∏ñ‡πâ‡∏≤‡∏à‡∏∞‡πÄ‡∏£‡∏µ‡∏¢‡∏Å HTTPS ‡πÄ‡∏ä‡πà‡∏ô Binance API)
# tzdata = ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏• Timezone (Asia/Bangkok)

ENV TZ=Asia/Bangkok
# ‚Üë ‡∏ï‡∏±‡πâ‡∏á Timezone ‡πÄ‡∏õ‡πá‡∏ô‡∏Å‡∏£‡∏∏‡∏á‡πÄ‡∏ó‡∏û

# ‚≠ê SECURITY BEST PRACTICE: ‡∏™‡∏£‡πâ‡∏≤‡∏á Non-root user
RUN addgroup -g 1001 -S appgroup && \
    adduser -u 1001 -S appuser -G appgroup
# ‚Üë ‡∏™‡∏£‡πâ‡∏≤‡∏á User "appuser" ‡∏ó‡∏µ‡πà‡πÑ‡∏°‡πà‡πÉ‡∏ä‡πà root
# ‡∏ó‡∏≥‡πÑ‡∏°? ‡∏ñ‡πâ‡∏≤ Hacker ‡πÄ‡∏à‡∏≤‡∏∞‡πÄ‡∏Ç‡πâ‡∏≤‡∏°‡∏≤‡πÑ‡∏î‡πâ ‡∏à‡∏∞‡∏ó‡∏≥‡∏≠‡∏∞‡πÑ‡∏£‡πÑ‡∏î‡πâ‡πÅ‡∏Ñ‡πà‡πÄ‡∏ó‡πà‡∏≤‡∏ó‡∏µ‡πà appuser ‡∏°‡∏µ‡∏™‡∏¥‡∏ó‡∏ò‡∏¥‡πå
# ‡πÑ‡∏°‡πà‡πÉ‡∏ä‡πà root ‡∏ó‡∏µ‡πà‡∏ó‡∏≥‡πÑ‡∏î‡πâ‡∏ó‡∏∏‡∏Å‡∏≠‡∏¢‡πà‡∏≤‡∏á!

WORKDIR /app

COPY --from=builder /app/main .
# ‚Üë ‚≠ê ‡∏´‡∏±‡∏ß‡πÉ‡∏à‡∏Ç‡∏≠‡∏á Multi-Stage!
# ‡∏Å‡πä‡∏≠‡∏õ‡πÅ‡∏Ñ‡πà‡πÑ‡∏ü‡∏•‡πå Binary "main" ‡∏à‡∏≤‡∏Å Stage 1 (builder)
# ‡πÑ‡∏°‡πà‡∏Å‡πä‡∏≠‡∏õ Source Code, ‡πÑ‡∏°‡πà‡∏Å‡πä‡∏≠‡∏õ Dependencies, ‡πÑ‡∏°‡πà‡∏Å‡πä‡∏≠‡∏õ‡∏≠‡∏∞‡πÑ‡∏£‡∏≠‡∏∑‡πà‡∏ô!
# Image ‡∏™‡∏∏‡∏î‡∏ó‡πâ‡∏≤‡∏¢ = Alpine (5MB) + Binary (15MB) = ~20MB
# ‡πÄ‡∏ó‡∏µ‡∏¢‡∏ö‡∏Å‡∏±‡∏ö Stage 1 ‡∏ó‡∏µ‡πà 1GB+ ‚Üí ‡πÄ‡∏•‡πá‡∏Å‡∏•‡∏á 50 ‡πÄ‡∏ó‡πà‡∏≤!

RUN chown -R appuser:appgroup /app
USER appuser
# ‚Üë ‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡∏°‡∏≤‡πÉ‡∏ä‡πâ appuser (‡πÑ‡∏°‡πà‡πÉ‡∏ä‡πà root)

EXPOSE 8080
# ‚Üë ‡πÄ‡∏õ‡∏¥‡∏î‡∏û‡∏≠‡∏£‡πå‡∏ï 8080

HEALTHCHECK --interval=30s --timeout=3s --start-period=5s --retries=3 \
    CMD wget --no-verbose --tries=1 --spider http://localhost:8080/health || exit 1
# ‚Üë ‚≠ê HEALTH CHECK
# ‡∏ó‡∏∏‡∏Å‡πÜ 30 ‡∏ß‡∏¥‡∏ô‡∏≤‡∏ó‡∏µ Docker ‡∏à‡∏∞‡∏¢‡∏¥‡∏á /health ‡∏î‡∏π‡∏ß‡πà‡∏≤ Server ‡∏¢‡∏±‡∏á‡∏≠‡∏¢‡∏π‡πà‡πÑ‡∏´‡∏°
# ‡∏ñ‡πâ‡∏≤‡πÑ‡∏°‡πà‡∏ï‡∏≠‡∏ö 3 ‡∏Ñ‡∏£‡∏±‡πâ‡∏á‡∏ï‡∏¥‡∏î ‚Üí Docker ‡∏à‡∏∞ restart Container ‡πÉ‡∏´‡πâ‡∏≠‡∏±‡∏ï‡πÇ‡∏ô‡∏°‡∏±‡∏ï‡∏¥
# start-period=5s = ‡πÉ‡∏´‡πâ‡πÄ‡∏ß‡∏•‡∏≤ Server ‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ï‡πâ‡∏ô 5 ‡∏ß‡∏¥‡∏Å‡πà‡∏≠‡∏ô‡πÄ‡∏£‡∏¥‡πà‡∏°‡πÄ‡∏ä‡πá‡∏Ñ

CMD ["./main"]
# ‚Üë ‡∏™‡∏±‡πà‡∏á Run Binary "main" ‡πÄ‡∏°‡∏∑‡πà‡∏≠ Container ‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ó‡∏≥‡∏á‡∏≤‡∏ô
```

### ‡∏ß‡∏¥‡∏ò‡∏µ‡∏ï‡∏≠‡∏ö‡∏Ñ‡∏≥‡∏ñ‡∏≤‡∏°‡∏™‡∏±‡∏°‡∏†‡∏≤‡∏©‡∏ì‡πå (‡∏û‡∏π‡∏î‡∏á‡πà‡∏≤‡∏¢‡πÜ):
> "‡∏ú‡∏°‡πÉ‡∏ä‡πâ Multi-stage Build ‡∏Ñ‡∏£‡∏±‡∏ö Stage ‡πÅ‡∏£‡∏Å‡πÄ‡∏õ‡∏£‡∏µ‡∏¢‡∏ö‡πÄ‡∏´‡∏°‡∏∑‡∏≠‡∏ô‡πÇ‡∏£‡∏á‡∏á‡∏≤‡∏ô ‚Äî ‡∏°‡∏µ Go Compiler ‡∏Ç‡∏ô‡∏≤‡∏î‡∏Å‡∏¥‡∏Å‡∏Å‡∏ß‡πà‡∏≤‡πÜ ‡πÄ‡∏≠‡∏≤‡πÑ‡∏ß‡πâ Compile ‡πÇ‡∏Ñ‡πâ‡∏î‡πÄ‡∏õ‡πá‡∏ô Binary Stage ‡∏ó‡∏µ‡πà‡∏™‡∏≠‡∏á ‡∏ú‡∏°‡πÄ‡∏≠‡∏≤‡πÅ‡∏Ñ‡πà‡∏ï‡∏±‡∏ß Binary ‡∏ó‡∏µ‡πà Compile ‡πÄ‡∏™‡∏£‡πá‡∏à‡πÅ‡∏•‡πâ‡∏ß ‡πÑ‡∏õ‡∏ß‡∏≤‡∏á‡∏ö‡∏ô Alpine Linux ‡πÄ‡∏õ‡∏•‡πà‡∏≤‡πÜ ‡∏ó‡∏µ‡πà‡∏Ç‡∏ô‡∏≤‡∏î‡πÅ‡∏Ñ‡πà 5 MB ‡∏ú‡∏•‡∏•‡∏±‡∏û‡∏ò‡πå‡∏Ñ‡∏∑‡∏≠ Image ‡∏™‡∏∏‡∏î‡∏ó‡πâ‡∏≤‡∏¢‡πÄ‡∏•‡πá‡∏Å‡∏°‡∏≤‡∏Å ‡πÅ‡∏Ñ‡πà ~20 MB ‡πÄ‡∏ó‡∏µ‡∏¢‡∏ö‡∏Å‡∏±‡∏ö‡∏ñ‡πâ‡∏≤‡πÑ‡∏°‡πà‡∏ó‡∏≥ ‡∏à‡∏∞‡πÑ‡∏î‡πâ‡∏Å‡∏¥‡∏Å‡∏Å‡∏ß‡πà‡∏≤‡πÜ ‡∏Ñ‡∏£‡∏±‡∏ö

> ‡πÄ‡∏£‡∏∑‡πà‡∏≠‡∏á Security ‡∏ú‡∏°‡∏™‡∏£‡πâ‡∏≤‡∏á Non-root User ‡∏ä‡∏∑‡πà‡∏≠ appuser ‡πÑ‡∏°‡πà‡πÉ‡∏´‡πâ Container ‡∏£‡∏±‡∏ô‡∏î‡πâ‡∏ß‡∏¢ root ‡∏õ‡πâ‡∏≠‡∏á‡∏Å‡∏±‡∏ô‡∏Å‡∏£‡∏ì‡∏µ Hacker ‡πÄ‡∏à‡∏≤‡∏∞‡πÄ‡∏Ç‡πâ‡∏≤‡∏°‡∏≤‡∏à‡∏∞‡∏ó‡∏≥‡∏≠‡∏∞‡πÑ‡∏£‡πÑ‡∏î‡πâ‡∏à‡∏≥‡∏Å‡∏±‡∏î ‡πÅ‡∏•‡∏∞‡∏ú‡∏°‡∏°‡∏µ Health Check ‡∏ó‡∏∏‡∏Å 30 ‡∏ß‡∏¥‡∏ô‡∏≤‡∏ó‡∏µ ‡∏ñ‡πâ‡∏≤ Server ‡∏•‡πà‡∏°‡∏Å‡πá Restart ‡πÉ‡∏´‡πâ‡∏≠‡∏±‡∏ï‡πÇ‡∏ô‡∏°‡∏±‡∏ï‡∏¥‡∏Ñ‡∏£‡∏±‡∏ö"

---

## 4. ‚ö° Go Fiber Backend

### 4.1 Entry Point: `cmd/api/main.go` (192 ‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î)

‡πÑ‡∏ü‡∏•‡πå‡∏ô‡∏µ‡πâ‡∏Ñ‡∏∑‡∏≠ **‡∏à‡∏∏‡∏î‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ï‡πâ‡∏ô‡∏Ç‡∏≠‡∏á‡∏ó‡∏∏‡∏Å‡∏≠‡∏¢‡πà‡∏≤‡∏á** ‡πÄ‡∏°‡∏∑‡πà‡∏≠‡∏£‡∏±‡∏ô‡∏Ñ‡∏≥‡∏™‡∏±‡πà‡∏á `go run cmd/api/main.go` ‡∏°‡∏±‡∏ô‡∏à‡∏∞‡∏ó‡∏≥ 8 ‡∏Ç‡∏±‡πâ‡∏ô‡∏ï‡∏≠‡∏ô‡∏ï‡∏≤‡∏°‡∏•‡∏≥‡∏î‡∏±‡∏ö:

```
main() ‡∏ó‡∏≥‡∏≠‡∏∞‡πÑ‡∏£‡∏ö‡πâ‡∏≤‡∏á:
1. ConnectDB()           ‚Üí ‡πÄ‡∏ä‡∏∑‡πà‡∏≠‡∏°‡∏ï‡πà‡∏≠ PostgreSQL (Neon)
2. MigrateAuthModels()   ‚Üí ‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏ï‡∏≤‡∏£‡∏≤‡∏á users (‡∏ñ‡πâ‡∏≤‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡∏°‡∏µ)
3. MigrateTradeModels()  ‚Üí ‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏ï‡∏≤‡∏£‡∏≤‡∏á trades (‡∏ñ‡πâ‡∏≤‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡∏°‡∏µ)
4. fiber.New()           ‚Üí ‡∏™‡∏£‡πâ‡∏≤‡∏á HTTP Server + ‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤ Timeout
5. Middleware            ‚Üí Logger, Recover, CORS
6. Routes               ‚Üí ‡∏ú‡∏π‡∏Å URL ‡∏Å‡∏±‡∏ö Handler Functions
7. 404 Handler           ‚Üí ‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£ URL ‡∏ó‡∏µ‡πà‡πÑ‡∏°‡πà‡∏°‡∏µ
8. app.Listen(":8080")   ‚Üí ‡πÄ‡∏õ‡∏¥‡∏î Server ‡∏£‡∏≠‡∏£‡∏±‡∏ö Request
```

### Routes ‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î (‡∏™‡∏≥‡∏Ñ‡∏±‡∏ç! ‡∏ï‡πâ‡∏≠‡∏á‡∏à‡∏≥):

```
PUBLIC (‡πÑ‡∏°‡πà‡∏ï‡πâ‡∏≠‡∏á Login):
  POST /api/register                        ‚Üí ‡∏™‡∏°‡∏±‡∏Ñ‡∏£‡∏™‡∏°‡∏≤‡∏ä‡∏¥‡∏Å
  POST /api/login                           ‚Üí ‡πÄ‡∏Ç‡πâ‡∏≤‡∏™‡∏π‡πà‡∏£‡∏∞‡∏ö‡∏ö ‚Üí ‡πÑ‡∏î‡πâ JWT Token
  POST /api/auth/forgot-password/request    ‚Üí ‡∏Ç‡∏≠ OTP ‡∏ó‡∏≤‡∏á‡∏≠‡∏µ‡πÄ‡∏°‡∏•
  POST /api/auth/forgot-password/verify     ‚Üí ‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô OTP
  POST /api/auth/forgot-password/reset      ‚Üí ‡∏ï‡∏±‡πâ‡∏á‡∏£‡∏´‡∏±‡∏™‡∏ú‡πà‡∏≤‡∏ô‡πÉ‡∏´‡∏°‡πà

PROTECTED (‡∏ï‡πâ‡∏≠‡∏á‡∏°‡∏µ JWT Token):
  POST   /api/trades       ‚Üí ‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡πÄ‡∏ó‡∏£‡∏î‡πÉ‡∏´‡∏°‡πà
  GET    /api/trades        ‚Üí ‡∏î‡∏π‡∏õ‡∏£‡∏∞‡∏ß‡∏±‡∏ï‡∏¥‡πÄ‡∏ó‡∏£‡∏î‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î (‡∏°‡∏µ Filter)
  GET    /api/trades/:id    ‚Üí ‡∏î‡∏π‡πÄ‡∏ó‡∏£‡∏î‡πÑ‡∏°‡πâ‡πÄ‡∏î‡∏µ‡∏¢‡∏ß
  PUT    /api/trades/:id    ‚Üí ‡∏≠‡∏±‡∏õ‡πÄ‡∏î‡∏ï‡πÄ‡∏ó‡∏£‡∏î (‡∏õ‡∏¥‡∏î Order)
  DELETE /api/trades/:id    ‚Üí ‡∏•‡∏ö‡πÄ‡∏ó‡∏£‡∏î (Soft Delete)

  POST   /api/ai/analyze   ‚Üí AI ‡∏ß‡∏¥‡πÄ‡∏Ñ‡∏£‡∏≤‡∏∞‡∏´‡πå‡πÅ‡∏ú‡∏ô‡πÄ‡∏ó‡∏£‡∏î
  POST   /api/ai/chat      ‚Üí Chatbot AI
  GET    /api/ai/insights   ‚Üí AI ‡∏ß‡∏¥‡πÄ‡∏Ñ‡∏£‡∏≤‡∏∞‡∏´‡πå‡∏û‡∏§‡∏ï‡∏¥‡∏Å‡∏£‡∏£‡∏°
```

### CORS (Cross-Origin Resource Sharing):
```go
AllowOriginsFunc: func(origin string) bool {
    // localhost:3000 ‚Üí ‡∏≠‡∏ô‡∏∏‡∏ç‡∏≤‡∏ï (Development)
    // *.vercel.app   ‚Üí ‡∏≠‡∏ô‡∏∏‡∏ç‡∏≤‡∏ï (Production)
    // *.xyz          ‚Üí ‡∏≠‡∏ô‡∏∏‡∏ç‡∏≤‡∏ï (Custom Domain)
}
```
**‡∏ó‡∏≥‡πÑ‡∏°‡∏ï‡πâ‡∏≠‡∏á‡∏°‡∏µ:** ‡πÄ‡∏û‡∏£‡∏≤‡∏∞ Frontend (port 3000) ‡∏Å‡∏±‡∏ö Backend (port 8080) ‡∏≠‡∏¢‡∏π‡πà‡∏Ñ‡∏ô‡∏•‡∏∞ Domain ‚Üí Browser ‡∏à‡∏∞‡∏ö‡∏•‡πá‡∏≠‡∏Ñ‡∏ñ‡πâ‡∏≤‡πÑ‡∏°‡πà‡∏ï‡∏±‡πâ‡∏á CORS

---

### 4.2 Database Connection: `pkg/database/postgres.go` (70 ‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î)

```go
var DB *gorm.DB  // ‚Üê ‡∏ï‡∏±‡∏ß‡πÅ‡∏õ‡∏£ Global ‡πÉ‡∏´‡πâ‡πÑ‡∏ü‡∏•‡πå‡∏≠‡∏∑‡πà‡∏ô‡πÄ‡∏£‡∏µ‡∏¢‡∏Å‡πÉ‡∏ä‡πâ

func ConnectDB() {
    // 1. ‡∏≠‡πà‡∏≤‡∏ô DB_URL ‡∏à‡∏≤‡∏Å .env
    dsn := os.Getenv("DB_URL")

    // 2. ‡πÄ‡∏ä‡∏∑‡πà‡∏≠‡∏°‡∏ï‡πà‡∏≠ PostgreSQL ‡∏ú‡πà‡∏≤‡∏ô GORM
    db, _ := gorm.Open(postgres.Open(dsn), &gorm.Config{
        Logger:      logger.Default.LogMode(logger.Warn),
        PrepareStmt: false,
    })

    // 3. ‚≠ê Connection Pool ‚Äî ‡∏™‡∏≥‡∏Ñ‡∏±‡∏ç‡∏°‡∏≤‡∏Å‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö Production!
    sqlDB.SetMaxIdleConns(5)                   // Connection ‡πÄ‡∏õ‡∏•‡πà‡∏≤‡πÄ‡∏Å‡πá‡∏ö‡πÑ‡∏ß‡πâ 5 ‡∏ï‡∏±‡∏ß
    sqlDB.SetMaxOpenConns(20)                  // ‡πÄ‡∏õ‡∏¥‡∏î‡πÑ‡∏î‡πâ‡∏™‡∏π‡∏á‡∏™‡∏∏‡∏î 20 ‡∏û‡∏£‡πâ‡∏≠‡∏°‡∏Å‡∏±‡∏ô
    sqlDB.SetConnMaxLifetime(30 * time.Minute) // ‡∏≠‡∏≤‡∏¢‡∏∏ Connection ‡∏™‡∏π‡∏á‡∏™‡∏∏‡∏î 30 ‡∏ô‡∏≤‡∏ó‡∏µ
    sqlDB.SetConnMaxIdleTime(10 * time.Minute) // ‡∏ß‡πà‡∏≤‡∏á‡πÄ‡∏Å‡∏¥‡∏ô 10 ‡∏ô‡∏≤‡∏ó‡∏µ ‚Üí ‡∏õ‡∏¥‡∏î‡∏ó‡∏¥‡πâ‡∏á

    // 4. Ping ‡∏ó‡∏î‡∏™‡∏≠‡∏ö‡∏ß‡πà‡∏≤‡πÄ‡∏ä‡∏∑‡πà‡∏≠‡∏°‡πÑ‡∏î‡πâ‡∏à‡∏£‡∏¥‡∏á
    sqlDB.Ping()
}
```

**‡∏ß‡∏¥‡∏ò‡∏µ‡∏≠‡∏ò‡∏¥‡∏ö‡∏≤‡∏¢‡∏™‡∏±‡∏°‡∏†‡∏≤‡∏©‡∏ì‡πå:**
> "‡∏ú‡∏°‡πÉ‡∏ä‡πâ Connection Pool ‡∏Ñ‡∏£‡∏±‡∏ö ‡πÅ‡∏ó‡∏ô‡∏ó‡∏µ‡πà‡∏à‡∏∞‡πÄ‡∏õ‡∏¥‡∏î-‡∏õ‡∏¥‡∏î Connection ‡∏ó‡∏∏‡∏Å‡∏Ñ‡∏£‡∏±‡πâ‡∏á ‡∏ã‡∏∂‡πà‡∏á‡πÄ‡∏õ‡∏•‡∏∑‡∏≠‡∏á‡∏°‡∏≤‡∏Å ‡∏ú‡∏°‡πÄ‡∏Å‡πá‡∏ö Pool ‡πÑ‡∏ß‡πâ 5-20 ‡∏ï‡∏±‡∏ß ‡πÄ‡∏°‡∏∑‡πà‡∏≠‡∏°‡∏µ Request ‡πÄ‡∏Ç‡πâ‡∏≤‡∏°‡∏≤‡∏Å‡πá‡∏´‡∏¢‡∏¥‡∏ö‡πÑ‡∏õ‡πÉ‡∏ä‡πâ ‡πÄ‡∏™‡∏£‡πá‡∏à‡πÅ‡∏•‡πâ‡∏ß‡∏Ñ‡∏∑‡∏ô ‡πÑ‡∏°‡πà‡∏ï‡πâ‡∏≠‡∏á‡πÄ‡∏õ‡∏¥‡∏î‡πÉ‡∏´‡∏°‡πà ‡∏ñ‡πâ‡∏≤ Connection ‡∏ß‡πà‡∏≤‡∏á‡πÄ‡∏Å‡∏¥‡∏ô 10 ‡∏ô‡∏≤‡∏ó‡∏µ ‡∏Å‡πá‡∏õ‡∏¥‡∏î‡∏≠‡∏±‡∏ï‡πÇ‡∏ô‡∏°‡∏±‡∏ï‡∏¥‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÑ‡∏°‡πà‡∏Å‡∏¥‡∏ô Resource ‡∏Ñ‡∏£‡∏±‡∏ö"

---

### 4.3 Auth Handler: `internal/handlers/auth.go` (270 ‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î)

#### User Model (GORM ‡∏à‡∏∞‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏ï‡∏≤‡∏£‡∏≤‡∏á "users" ‡πÉ‡∏´‡πâ‡∏≠‡∏±‡∏ï‡πÇ‡∏ô‡∏°‡∏±‡∏ï‡∏¥):
```go
type User struct {
    ID                uint           // Primary Key (Auto Increment)
    Username          string         `gorm:"uniqueIndex;size:100"`
    Email             string         `gorm:"uniqueIndex;size:255"`
    Password          string         // ‡πÄ‡∏Å‡πá‡∏ö bcrypt Hash (‡πÑ‡∏°‡πà‡πÉ‡∏ä‡πà Password ‡∏à‡∏£‡∏¥‡∏á!)
    ResetOTP          *string        // OTP ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö Forgot Password
    ResetOTPExpiresAt *time.Time     // OTP ‡∏´‡∏°‡∏î‡∏≠‡∏≤‡∏¢‡∏∏‡πÄ‡∏°‡∏∑‡πà‡∏≠‡πÑ‡∏´‡∏£‡πà
    CreatedAt         time.Time
    UpdatedAt         time.Time
    DeletedAt         gorm.DeletedAt `gorm:"index"` // ‚≠ê Soft Delete!
}
```

#### Register Flow:
```
‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ‡∏Å‡∏£‡∏≠‡∏Å username, email, password
    ‚Üì
1. BodyParser ‚Üí ‡πÅ‡∏Å‡∏∞ JSON ‡∏à‡∏≤‡∏Å Request Body
2. ‡πÄ‡∏ä‡πá‡∏Ñ username ‡∏ã‡πâ‡∏≥‡πÑ‡∏´‡∏°? (SELECT * FROM users WHERE username = ?)
3. ‡πÄ‡∏ä‡πá‡∏Ñ email ‡∏ã‡πâ‡∏≥‡πÑ‡∏´‡∏°?
4. ‚≠ê bcrypt.GenerateFromPassword(password, cost=12) ‚Üí Hash ‡∏£‡∏´‡∏±‡∏™‡∏ú‡πà‡∏≤‡∏ô
   ‡∏ï‡∏±‡∏ß‡∏≠‡∏¢‡πà‡∏≤‡∏á: "mypassword123" ‚Üí "$2a$12$LJ3m4aV..."
   (cost=12 ‡∏´‡∏°‡∏≤‡∏¢‡∏Ñ‡∏ß‡∏≤‡∏°‡∏ß‡πà‡∏≤ Hash 1 ‡∏Ñ‡∏£‡∏±‡πâ‡∏á‡πÉ‡∏ä‡πâ‡πÄ‡∏ß‡∏•‡∏≤ ~250ms ‚Üí ‡πÇ‡∏à‡∏°‡∏ï‡∏µ Brute Force ‡∏¢‡∏≤‡∏Å!)
5. DB.Create(&user) ‚Üí ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏•‡∏á Database
6. Response: { "message": "‡∏™‡∏°‡∏±‡∏Ñ‡∏£‡∏™‡∏°‡∏≤‡∏ä‡∏¥‡∏Å‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à" }
```

#### Login Flow:
```
‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ‡∏Å‡∏£‡∏≠‡∏Å username, password
    ‚Üì
1. SELECT * FROM users WHERE username = ? ‚Üí ‡∏´‡∏≤ User
2. ‚≠ê bcrypt.CompareHashAndPassword(hash, password) ‚Üí ‡πÄ‡∏õ‡∏£‡∏µ‡∏¢‡∏ö‡πÄ‡∏ó‡∏µ‡∏¢‡∏ö
   ‡∏£‡∏∞‡∏ö‡∏ö‡πÄ‡∏≠‡∏≤ password ‡∏ó‡∏µ‡πà‡∏™‡πà‡∏á‡∏°‡∏≤ Hash ‡πÉ‡∏´‡∏°‡πà ‡πÅ‡∏•‡πâ‡∏ß‡πÄ‡∏ó‡∏µ‡∏¢‡∏ö‡∏Å‡∏±‡∏ö Hash ‡∏ó‡∏µ‡πà‡πÄ‡∏Å‡πá‡∏ö‡πÑ‡∏ß‡πâ‡πÉ‡∏ô DB
   ‚Üí ‡∏ï‡∏£‡∏á‡∏Å‡∏±‡∏ô = ‡∏£‡∏´‡∏±‡∏™‡∏ñ‡∏π‡∏Å | ‡πÑ‡∏°‡πà‡∏ï‡∏£‡∏á = ‡∏£‡∏´‡∏±‡∏™‡∏ú‡∏¥‡∏î
3. ‡∏™‡∏£‡πâ‡∏≤‡∏á JWT Token:
   - UserID + Username ‡πÉ‡∏™‡πà‡πÉ‡∏ô Payload (Claims)
   - ‡πÄ‡∏ã‡πá‡∏ô‡∏î‡πâ‡∏ß‡∏¢ JWT_SECRET (HMAC-SHA256)
   - ‡∏´‡∏°‡∏î‡∏≠‡∏≤‡∏¢‡∏∏ 24 ‡∏ä‡∏±‡πà‡∏ß‡πÇ‡∏°‡∏á
4. Response: { "token": "eyJhbGciOiJIUzI1...", "expires_at": 1709..., "user": {...} }
```

**JWT Token ‡∏°‡∏µ‡∏≠‡∏∞‡πÑ‡∏£‡∏Ç‡πâ‡∏≤‡∏á‡πÉ‡∏ô:**
```json
// Header
{ "alg": "HS256" }

// Payload (Claims) ‚Äî ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ó‡∏µ‡πà‡πÄ‡∏£‡∏≤‡πÉ‡∏™‡πà
{
  "user_id": 1,
  "username": "boss123",
  "exp": 1709251200    // ‡∏´‡∏°‡∏î‡∏≠‡∏≤‡∏¢‡∏∏‡πÄ‡∏°‡∏∑‡πà‡∏≠‡πÑ‡∏´‡∏£‡πà (Unix timestamp)
}

// Signature ‚Äî ‡∏•‡∏≤‡∏¢‡πÄ‡∏ã‡πá‡∏ô‡∏î‡∏¥‡∏à‡∏¥‡∏ó‡∏±‡∏•
HMAC-SHA256(header + payload, JWT_SECRET)
```

---

### 4.4 Middleware (JWT Guard): `internal/handlers/middleware.go` (70 ‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î)

```go
func JWTMiddleware(c *fiber.Ctx) error {
    // 1. ‡∏î‡∏∂‡∏á Header "Authorization: Bearer <token>"
    authHeader := c.Get("Authorization")

    // 2. ‡πÅ‡∏¢‡∏Å "Bearer" ‡∏Å‡∏±‡∏ö "<token>" ‡∏≠‡∏≠‡∏Å‡∏à‡∏≤‡∏Å‡∏Å‡∏±‡∏ô
    parts := strings.Split(authHeader, " ")

    // 3. Parse ‡πÅ‡∏•‡∏∞ Verify Token
    claims, err := GetUserFromToken(parts[1])
    // ‚Üí ‡πÄ‡∏ä‡πá‡∏Ñ Signature ‡∏ï‡∏£‡∏á‡πÑ‡∏´‡∏°? ‡∏´‡∏°‡∏î‡∏≠‡∏≤‡∏¢‡∏∏‡∏¢‡∏±‡∏á?

    // 4. ‚≠ê ‡∏ñ‡πâ‡∏≤‡∏ú‡πà‡∏≤‡∏ô ‚Üí ‡πÉ‡∏™‡πà‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏• User ‡∏•‡∏á‡πÉ‡∏ô Context
    c.Locals("userID", claims.UserID)
    c.Locals("username", claims.Username)

    // 5. ‡∏™‡πà‡∏á‡∏ï‡πà‡∏≠‡πÑ‡∏õ‡πÉ‡∏´‡πâ Handler ‡∏à‡∏£‡∏¥‡∏á
    return c.Next()
}
```

**Flow ‡∏ó‡∏µ‡πà‡πÄ‡∏Å‡∏¥‡∏î‡∏Ç‡∏∂‡πâ‡∏ô‡∏à‡∏£‡∏¥‡∏á:**
```
Frontend ‡∏¢‡∏¥‡∏á POST /api/trades
    ‚Üì
Request ‡∏°‡∏µ Header "Authorization: Bearer eyJhbG..."
    ‚Üì
JWTMiddleware() ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö:
  ‚úì ‡∏°‡∏µ Header ‚Üí ‚úì Format ‡∏ñ‡∏π‡∏Å ‚Üí ‚úì Token ‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡∏´‡∏°‡∏î‡∏≠‡∏≤‡∏¢‡∏∏ ‚Üí ‚úì Signature ‡∏ñ‡∏π‡∏Å
    ‚Üì
‡πÉ‡∏™‡πà userID ‡∏•‡∏á Context ‚Üí ‡∏™‡πà‡∏á‡∏ï‡πà‡∏≠‡πÑ‡∏õ CreateTrade()
    ‚Üì
CreateTrade() ‡πÄ‡∏£‡∏µ‡∏¢‡∏Å GetCurrentUserID(c) ‚Üí ‡πÑ‡∏î‡πâ userID = 1
    ‚Üì
‡∏™‡∏£‡πâ‡∏≤‡∏á‡πÄ‡∏ó‡∏£‡∏î‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö user_id = 1 (‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏ó‡∏≤‡∏á Access ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏Ñ‡∏ô‡∏≠‡∏∑‡πà‡∏ô!)
```

---

### 4.5 Trade Handler: `internal/handlers/trade.go` (505 ‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î)

#### Trade Model:
```go
type Trade struct {
    ID            uint      // Primary Key
    UserID        uint      // ‚≠ê Foreign Key ‚Üí users.id
    Pair          string    // ‡πÄ‡∏ä‡πà‡∏ô "BTC/USDT"
    Side          string    // "LONG" ‡∏´‡∏£‡∏∑‡∏≠ "SHORT"
    EntryPrice    float64   // ‡∏£‡∏≤‡∏Ñ‡∏≤‡πÄ‡∏Ç‡πâ‡∏≤
    ExitPrice     float64   // ‡∏£‡∏≤‡∏Ñ‡∏≤‡∏≠‡∏≠‡∏Å
    StopLoss      float64   // ‡∏à‡∏∏‡∏î SL
    TakeProfit    float64   // ‡∏à‡∏∏‡∏î TP
    PositionSize  float64   // ‡∏Ç‡∏ô‡∏≤‡∏î Position ($)
    Quantity      float64   // ‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡πÄ‡∏´‡∏£‡∏µ‡∏¢‡∏ç
    Leverage      int       // ‡πÄ‡∏•‡πÄ‡∏ß‡∏≠‡πÄ‡∏£‡∏à
    RiskPercent   float64   // % ‡∏Ñ‡∏ß‡∏≤‡∏°‡πÄ‡∏™‡∏µ‡πà‡∏¢‡∏á
    MaxWin        float64   // ‡∏Å‡∏≥‡πÑ‡∏£‡∏™‡∏π‡∏á‡∏™‡∏∏‡∏î ($)
    MaxLoss       float64   // ‡∏Ç‡∏≤‡∏î‡∏ó‡∏∏‡∏ô‡∏™‡∏π‡∏á‡∏™‡∏∏‡∏î ($)
    RiskRewardRatio float64 // Risk:Reward Ratio
    Fee           float64   // ‡∏Ñ‡πà‡∏≤‡∏ò‡∏£‡∏£‡∏°‡πÄ‡∏ô‡∏µ‡∏¢‡∏°
    EntryReason   string    // ‡πÄ‡∏´‡∏ï‡∏∏‡∏ú‡∏•‡∏ó‡∏µ‡πà‡πÄ‡∏Ç‡πâ‡∏≤
    SetupScore    int       // 1-5 ‡∏î‡∏≤‡∏ß (AI ‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì)
    PnL           float64   // ‡∏Å‡∏≥‡πÑ‡∏£/‡∏Ç‡∏≤‡∏î‡∏ó‡∏∏‡∏ô
    PnLPercent    float64   // PnL %
    Status        string    // OPEN, WIN, LOSS, BREAK_EVEN
    Notes         string    // ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å
    Tags          string    // ‡πÅ‡∏ó‡πá‡∏Å
    DeletedAt     gorm.DeletedAt // ‚≠ê Soft Delete
}
```

#### ‚≠ê calculateSetupScore() ‚Äî ‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì‡∏î‡∏≤‡∏ß‡∏≠‡∏±‡∏ï‡πÇ‡∏ô‡∏°‡∏±‡∏ï‡∏¥:
```go
func calculateSetupScore(rr float64, riskPercent float64) int {
    score := 3  // ‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ï‡πâ‡∏ô 3 ‡∏î‡∏≤‡∏ß

    // ‡∏¢‡∏¥‡πà‡∏á RR ‡∏™‡∏π‡∏á ‡∏¢‡∏¥‡πà‡∏á‡∏î‡∏µ
    if rr > 3 { score = 5 }        // RR > 3 = 5 ‡∏î‡∏≤‡∏ß (‡∏™‡∏∏‡∏î‡∏¢‡∏≠‡∏î!)
    else if rr > 2 { score = 4 }   // RR > 2 = 4 ‡∏î‡∏≤‡∏ß
    else if rr > 1.5 { score = 3 } // RR > 1.5 = 3 ‡∏î‡∏≤‡∏ß

    // ‡πÅ‡∏ï‡πà‡∏ñ‡πâ‡∏≤‡πÄ‡∏™‡∏µ‡πà‡∏¢‡∏á‡πÄ‡∏¢‡∏≠‡∏∞ ‡∏´‡∏±‡∏Å!
    if riskPercent > 10 { score -= 2 }     // Risk > 10% ‚Üí ‡∏´‡∏±‡∏Å 2 ‡∏î‡∏≤‡∏ß
    else if riskPercent > 5 { score -= 1 } // Risk > 5% ‚Üí ‡∏´‡∏±‡∏Å 1 ‡∏î‡∏≤‡∏ß

    return max(1, min(5, score))  // ‡∏ú‡∏•‡∏•‡∏±‡∏û‡∏ò‡πå 1-5 ‡∏î‡∏≤‡∏ß
}
```

#### GetTrades() ‚Äî ‡∏î‡∏∂‡∏á‡∏õ‡∏£‡∏∞‡∏ß‡∏±‡∏ï‡∏¥‡∏û‡∏£‡πâ‡∏≠‡∏° Filter + Stats:
```
GET /api/trades?status=WIN&pair=BTC&limit=10&sort_by=pnl&sort_dir=desc
    ‚Üì
1. WHERE user_id = ? (‡∏î‡∏∂‡∏á‡πÅ‡∏Ñ‡πà‡∏Ç‡∏≠‡∏á‡∏ï‡∏±‡∏ß‡πÄ‡∏≠‡∏á)
2. AND status = 'WIN' (Filter ‡∏ï‡∏≤‡∏°‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞)
3. AND pair LIKE '%BTC%' (Filter ‡∏ï‡∏≤‡∏°‡πÄ‡∏´‡∏£‡∏µ‡∏¢‡∏ç)
4. ORDER BY pnl DESC (‡πÄ‡∏£‡∏µ‡∏¢‡∏á‡∏ï‡∏≤‡∏° PnL ‡∏°‡∏≤‡∏Å‡πÑ‡∏õ‡∏ô‡πâ‡∏≠‡∏¢)
5. LIMIT 10 OFFSET 0 (‡πÄ‡∏≠‡∏≤‡πÅ‡∏Ñ‡πà 10 ‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£)
6. ‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì Stats: {total_pnl, win_count, loss_count, avg_rr}
```

#### Soft Delete ‡∏Ñ‡∏∑‡∏≠‡∏≠‡∏∞‡πÑ‡∏£:
```
‡∏õ‡∏Å‡∏ï‡∏¥ DELETE ‚Üí ‡∏•‡∏ö‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏à‡∏≤‡∏Å Database ‡∏ñ‡∏≤‡∏ß‡∏£ (‡∏Å‡∏π‡πâ‡∏Ñ‡∏∑‡∏ô‡πÑ‡∏°‡πà‡πÑ‡∏î‡πâ!)

Soft Delete ‚Üí ‡πÑ‡∏°‡πà‡πÑ‡∏î‡πâ‡∏•‡∏ö‡∏à‡∏£‡∏¥‡∏á! ‡πÅ‡∏Ñ‡πà‡πÉ‡∏™‡πà‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà‡∏•‡∏á‡∏ä‡πà‡∏≠‡∏á deleted_at
‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏¢‡∏±‡∏á‡∏≠‡∏¢‡∏π‡πà‡πÉ‡∏ô Database ‡πÅ‡∏ï‡πà GORM ‡∏à‡∏∞‡πÑ‡∏°‡πà‡∏î‡∏∂‡∏á‡∏°‡∏≤‡πÅ‡∏™‡∏î‡∏á

‡∏ï‡∏±‡∏ß‡∏≠‡∏¢‡πà‡∏≤‡∏á:
  id=1, pair="BTC", deleted_at=NULL       ‚Üí ‡πÅ‡∏™‡∏î‡∏á‡∏õ‡∏Å‡∏ï‡∏¥
  id=2, pair="ETH", deleted_at="2026-03-01" ‚Üí ‡πÑ‡∏°‡πà‡πÅ‡∏™‡∏î‡∏á (‡πÄ‡∏´‡∏°‡∏∑‡∏≠‡∏ô‡∏•‡∏ö‡πÅ‡∏•‡πâ‡∏ß)

‡∏Ç‡πâ‡∏≠‡∏î‡∏µ: ‡∏ñ‡πâ‡∏≤‡∏•‡∏ö‡∏ú‡∏¥‡∏î ‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡∏Å‡∏π‡πâ‡∏Ñ‡∏∑‡∏ô‡πÑ‡∏î‡πâ!
‡∏ß‡∏¥‡∏ò‡∏µ‡∏Å‡∏π‡πâ: UPDATE trades SET deleted_at = NULL WHERE id = 2
```

---

## 5. üåê Next.js Frontend

### 5.1 API Layer: `app/utils/api.ts` (279 ‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î)

```typescript
// ‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤ Base URL ‚Äî ‡∏î‡∏π‡∏à‡∏≤‡∏Å Environment Variable ‡∏Å‡πà‡∏≠‡∏ô
const RAW_API_BASE_URL = process.env.NEXT_PUBLIC_API_URL || 'http://localhost:8080';
// Production: NEXT_PUBLIC_API_URL = https://mmrrdikub.onrender.com
// Development: ‡πÑ‡∏°‡πà‡∏ï‡∏±‡πâ‡∏á ‚Üí ‡πÉ‡∏ä‡πâ localhost:8080

const api = axios.create({
    baseURL: API_BASE_URL,    // ‡πÄ‡∏ä‡πà‡∏ô http://localhost:8080/api
    timeout: 60000,           // 60 ‡∏ß‡∏¥‡∏ô‡∏≤‡∏ó‡∏µ (AI ‡∏≠‡∏≤‡∏à‡πÉ‡∏ä‡πâ‡πÄ‡∏ß‡∏•‡∏≤ 30 ‡∏ß‡∏¥)
    withCredentials: true,    // ‡∏™‡πà‡∏á Cookie/Credentials ‡πÑ‡∏î‡πâ
});

// ‚≠ê Request Interceptor ‚Äî ‡∏¢‡∏±‡∏î JWT Token ‡πÉ‡∏´‡πâ‡∏ó‡∏∏‡∏Å Request ‡∏≠‡∏±‡∏ï‡πÇ‡∏ô‡∏°‡∏±‡∏ï‡∏¥
api.interceptors.request.use((config) => {
    const token = localStorage.getItem('token');
    if (token) {
        config.headers.Authorization = `Bearer ${token}`;
    }
    return config;
});

// ‚≠ê Response Interceptor ‚Äî ‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£ Error ‡∏Å‡∏•‡∏≤‡∏á
api.interceptors.response.use(
    (response) => response,  // ‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à ‚Üí ‡∏™‡πà‡∏á‡∏ï‡πà‡∏≠
    (error) => {
        if (error.response?.status === 401) {
            // Token ‡∏´‡∏°‡∏î‡∏≠‡∏≤‡∏¢‡∏∏ ‚Üí ‡∏•‡πâ‡∏≤‡∏á Token ‚Üí Redirect ‡πÑ‡∏õ Login
            localStorage.removeItem('token');
        }
        return Promise.reject(error);
    }
);
```

### 5.2 Components ‡∏´‡∏•‡∏±‡∏Å

| Component | Lines | ‡∏´‡∏ô‡πâ‡∏≤‡∏ó‡∏µ‡πà |
|-----------|-------|--------|
| `Calculator.tsx` | 1000+ | Position Size Calculator ‡∏´‡∏•‡∏±‡∏Å, Multi-SL/TP, Fee-Adjusted |
| `Dashboard.tsx` | ~500 | ‡∏´‡∏ô‡πâ‡∏≤ Dashboard, ‡πÅ‡∏™‡∏î‡∏á Trade History, Stats |
| `AiChat.tsx` | ~200 | UI Chatbot ‡∏Ñ‡∏∏‡∏¢‡∏Å‡∏±‡∏ö AI |
| `AIInsights.tsx` | ~150 | ‡πÅ‡∏™‡∏î‡∏á AI ‡∏ß‡∏¥‡πÄ‡∏Ñ‡∏£‡∏≤‡∏∞‡∏´‡πå‡∏û‡∏§‡∏ï‡∏¥‡∏Å‡∏£‡∏£‡∏°‡πÄ‡∏ó‡∏£‡∏î |
| `PriceTicker.tsx` | ~100 | ‡∏£‡∏≤‡∏Ñ‡∏≤ Crypto Real-time ‡∏à‡∏≤‡∏Å Binance WebSocket |
| `Navbar.tsx` | ~100 | Navigation + Theme Toggle + Language Switch |

### 5.3 Layout: `app/layout.tsx`
```tsx
// Root Layout ‡∏Ñ‡∏£‡∏≠‡∏ö‡∏ó‡∏∏‡∏Å‡∏´‡∏ô‡πâ‡∏≤
<html lang="th" className="dark">
  <body className={`${inter.variable} ${kanit.variable}`}>
    <LanguageProvider>   {/* ‡∏†‡∏≤‡∏©‡∏≤ TH/EN */}
      <ThemeProvider>     {/* Dark/Light Mode */}
        {children}        {/* ‡∏´‡∏ô‡πâ‡∏≤‡πÄ‡∏ß‡πá‡∏ö‡∏à‡∏£‡∏¥‡∏á */}
      </ThemeProvider>
    </LanguageProvider>
  </body>
</html>
```

---

## 6. ü§ñ AI Risk Analyst ‚Äî RAG Pipeline

### RAG ‡∏Ñ‡∏∑‡∏≠‡∏≠‡∏∞‡πÑ‡∏£?
RAG = **Retrieval-Augmented Generation**
‡πÅ‡∏õ‡∏•‡πÄ‡∏õ‡πá‡∏ô‡∏†‡∏≤‡∏©‡∏≤‡∏ö‡πâ‡∏≤‡∏ô‡πÜ = "‡∏î‡∏∂‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏à‡∏£‡∏¥‡∏á‡∏°‡∏≤‡∏õ‡πâ‡∏≠‡∏ô AI ‡∏Å‡πà‡∏≠‡∏ô ‡πÅ‡∏•‡πâ‡∏ß‡∏Ñ‡πà‡∏≠‡∏¢‡πÉ‡∏´‡πâ AI ‡∏ß‡∏¥‡πÄ‡∏Ñ‡∏£‡∏≤‡∏∞‡∏´‡πå"

**‡∏ñ‡πâ‡∏≤‡πÑ‡∏°‡πà‡∏°‡∏µ RAG:** AI ‡∏à‡∏∞‡∏°‡∏±‡πà‡∏ß‡∏ï‡∏≠‡∏ö‡∏à‡∏≤‡∏Å‡∏Ñ‡∏ß‡∏≤‡∏°‡∏£‡∏π‡πâ‡πÄ‡∏Å‡πà‡∏≤‡πÜ (Training Data) ‡πÄ‡∏ä‡πà‡∏ô ‡∏ö‡∏≠‡∏Å‡∏£‡∏≤‡∏Ñ‡∏≤ BTC = $28,000 (‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏õ‡∏µ 2023!)
**‡∏°‡∏µ RAG:** ‡πÄ‡∏£‡∏≤‡∏õ‡πâ‡∏≠‡∏ô‡∏£‡∏≤‡∏Ñ‡∏≤‡∏à‡∏£‡∏¥‡∏á $97,000 ‡πÉ‡∏´‡πâ‡∏°‡∏±‡∏ô ‚Üí ‡∏ï‡∏≠‡∏ö‡∏ñ‡∏π‡∏Å!

### Flow ‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î‡πÄ‡∏°‡∏∑‡πà‡∏≠ User ‡∏Å‡∏î "‡∏ß‡∏¥‡πÄ‡∏Ñ‡∏£‡∏≤‡∏∞‡∏´‡πå":

```
User ‡∏Å‡∏î‡∏õ‡∏∏‡πà‡∏° "‡∏™‡πà‡∏á‡πÉ‡∏´‡πâ AI ‡∏ß‡∏¥‡πÄ‡∏Ñ‡∏£‡∏≤‡∏∞‡∏´‡πå" ‡∏ö‡∏ô Frontend
    ‚Üì
POST /api/ai/analyze { coin: "BTC/USDT", entry: 97000, sl: 95000, tp: 100000, side: "LONG" }
    ‚Üì
[JWTMiddleware] ‚Üí ‡∏ï‡∏£‡∏ß‡∏à Token ‚Üí ‡πÑ‡∏î‡πâ userID
    ‚Üì
[AnalyzeTrade Handler] ‡∏ó‡∏≥ 5 ‡∏Ç‡∏±‡πâ‡∏ô‡∏ï‡∏≠‡∏ô:

  ‚ë† ‡∏î‡∏∂‡∏á‡∏õ‡∏£‡∏∞‡∏ß‡∏±‡∏ï‡∏¥‡πÄ‡∏ó‡∏£‡∏î‡πÄ‡∏Å‡πà‡∏≤‡∏Ç‡∏≠‡∏á User ‡∏Ñ‡∏ô‡∏ô‡∏µ‡πâ (‡∏à‡∏≤‡∏Å PostgreSQL)
     ‚Üí SELECT * FROM trades WHERE user_id=1 AND pair LIKE '%BTC%' ORDER BY created_at DESC LIMIT 5

  ‚ë° ‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì Risk:Reward Ratio
     ‚Üí RR = (TP - Entry) / (Entry - SL) = (100000 - 97000) / (97000 - 95000) = 1.5

  ‚ë¢ ‚≠ê ‡∏î‡∏∂‡∏á‡∏Ç‡πà‡∏≤‡∏ß Crypto Real-time (RAG!)
     ‚Üí fetchCryptoNews("BTC") ‚Üí ‡πÄ‡∏£‡∏µ‡∏¢‡∏Å CryptoPanic API ‚Üí Cache 24 ‡∏ä‡∏°.

  ‚ë£ ‚≠ê ‡∏î‡∏∂‡∏á‡∏£‡∏≤‡∏Ñ‡∏≤‡∏õ‡∏±‡∏à‡∏à‡∏∏‡∏ö‡∏±‡∏ô (RAG!)
     ‚Üí fetchLivePrice("BTC") ‚Üí ‡πÄ‡∏£‡∏µ‡∏¢‡∏Å Binance API ‚Üí Cache 1 ‡∏ô‡∏≤‡∏ó‡∏µ

  ‚ë§ ‡∏£‡∏ß‡∏°‡∏ó‡∏∏‡∏Å‡∏≠‡∏¢‡πà‡∏≤‡∏á‡πÄ‡∏õ‡πá‡∏ô Prompt ‡∏™‡πà‡∏á AI:
     "‡∏Ñ‡∏∏‡∏ì‡∏Ñ‡∏∑‡∏≠ AI Risk Manager...
      ‡πÄ‡∏´‡∏£‡∏µ‡∏¢‡∏ç BTC/USDT ‡∏ù‡∏±‡πà‡∏á LONG: ‡πÄ‡∏Ç‡πâ‡∏≤ 97000, SL 95000, TP 100000
      üí∞ ‡∏£‡∏≤‡∏Ñ‡∏≤‡∏ï‡∏•‡∏≤‡∏î‡∏õ‡∏±‡∏à‡∏à‡∏∏‡∏ö‡∏±‡∏ô: $97,150 USD
      ‡∏õ‡∏£‡∏∞‡∏ß‡∏±‡∏ï‡∏¥: ‡πÑ‡∏°‡πâ1: WIN PnL=500, ‡πÑ‡∏°‡πâ2: LOSS PnL=-200
      ‡∏Ç‡πà‡∏≤‡∏ß‡∏£‡πâ‡∏≠‡∏ô‡πÅ‡∏£‡∏á:
      - Bitcoin ETF sees record inflows
      - Fed signals rate pause
      ..."
    ‚Üì
[3-Tier Fallback System]:

  ‡∏•‡∏≥‡∏î‡∏±‡∏ö 1: Gemini API (Google)
    ‚Üí ‡∏ñ‡πâ‡∏≤‡πÑ‡∏î‡πâ‡∏Ñ‡∏≥‡∏ï‡∏≠‡∏ö ‚Üí ‡∏™‡πà‡∏á‡∏Å‡∏•‡∏±‡∏ö ‚úÖ
    ‚Üí ‡∏ñ‡πâ‡∏≤ 429 Quota Exceeded ‚Üí ‡πÑ‡∏õ‡∏•‡∏≥‡∏î‡∏±‡∏ö 2

  ‡∏•‡∏≥‡∏î‡∏±‡∏ö 2: Pollinations AI (Backup ‡∏ü‡∏£‡∏µ)
    ‚Üí ‡∏ñ‡πâ‡∏≤‡πÑ‡∏î‡πâ‡∏Ñ‡∏≥‡∏ï‡∏≠‡∏ö ‚Üí ‡∏•‡∏ö‡πÇ‡∏Ü‡∏©‡∏ì‡∏≤‡∏ó‡∏¥‡πâ‡∏á ‚Üí ‡∏™‡πà‡∏á‡∏Å‡∏•‡∏±‡∏ö ‚úÖ
    ‚Üí ‡∏ñ‡πâ‡∏≤‡∏•‡πà‡∏°‡∏≠‡∏µ‡∏Å ‚Üí ‡πÑ‡∏õ‡∏•‡∏≥‡∏î‡∏±‡∏ö 3

  ‡∏•‡∏≥‡∏î‡∏±‡∏ö 3: Rule-based Fallback
    ‚Üí ‡πÉ‡∏ä‡πâ Logic ‡∏û‡∏∑‡πâ‡∏ô‡∏ê‡∏≤‡∏ô ‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì RR ‡πÅ‡∏•‡πâ‡∏ß‡∏ï‡∏≠‡∏ö‡∏Å‡∏•‡∏±‡∏ö
    ‚Üí ‡πÄ‡∏ß‡πá‡∏ö‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏ó‡∏≤‡∏á‡∏´‡∏ô‡πâ‡∏≤‡∏Ç‡∏≤‡∏ß 100%!
```

### Caching System ‚Äî ‡∏ó‡∏≥‡πÑ‡∏°‡∏ñ‡∏∂‡∏á‡∏ï‡πâ‡∏≠‡∏á‡∏°‡∏µ:

```
fetchCryptoNews() ‚Äî Cache 24 ‡∏ä‡∏±‡πà‡∏ß‡πÇ‡∏°‡∏á
‚îú‚îÄ‚îÄ ‡πÄ‡∏´‡∏ï‡∏∏‡∏ú‡∏•: CryptoPanic API ‡∏ü‡∏£‡∏µ‡πÉ‡∏´‡πâ‡πÅ‡∏Ñ‡πà 100 ‡∏Ñ‡∏£‡∏±‡πâ‡∏á/‡πÄ‡∏î‡∏∑‡∏≠‡∏ô
‚îú‚îÄ‚îÄ ‡∏ñ‡πâ‡∏≤‡πÑ‡∏°‡πà cache: User 20 ‡∏Ñ‡∏ô‡∏Å‡∏î‡∏ß‡∏±‡∏ô‡∏•‡∏∞ 5 ‡∏Ñ‡∏£‡∏±‡πâ‡∏á = 100 ‡∏Ñ‡∏£‡∏±‡πâ‡∏á/‡∏ß‡∏±‡∏ô ‚Üí ‡∏´‡∏°‡∏î‡πÇ‡∏Ñ‡∏ß‡∏ï‡πâ‡∏≤‡∏ß‡∏±‡∏ô‡πÄ‡∏î‡∏µ‡∏¢‡∏ß!
‚îú‚îÄ‚îÄ ‡∏°‡∏µ cache: ‡∏Ç‡πà‡∏≤‡∏ß BTC ‡∏ñ‡∏π‡∏Å‡πÄ‡∏Å‡πá‡∏ö‡πÉ‡∏ô RAM ‚Üí User 1000 ‡∏Ñ‡∏ô‡πÉ‡∏ä‡πâ‡∏Å‡πá‡∏¢‡∏¥‡∏á API ‡πÅ‡∏Ñ‡πà‡∏Ñ‡∏£‡∏±‡πâ‡∏á‡πÄ‡∏î‡∏µ‡∏¢‡∏ß/24‡∏ä‡∏°.
‚îî‚îÄ‚îÄ ‡πÉ‡∏ä‡πâ sync.Mutex ‡∏õ‡πâ‡∏≠‡∏á‡∏Å‡∏±‡∏ô Race Condition (‡∏´‡∏•‡∏≤‡∏¢ Request ‡πÄ‡∏Ç‡πâ‡∏≤‡∏û‡∏£‡πâ‡∏≠‡∏°‡∏Å‡∏±‡∏ô)

fetchLivePrice() ‚Äî Cache 1 ‡∏ô‡∏≤‡∏ó‡∏µ
‚îú‚îÄ‚îÄ ‡πÄ‡∏´‡∏ï‡∏∏‡∏ú‡∏•: ‡∏£‡∏≤‡∏Ñ‡∏≤‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡πÄ‡∏£‡πá‡∏ß ‡∏ï‡πâ‡∏≠‡∏á Refresh ‡∏ö‡πà‡∏≠‡∏¢ ‡πÅ‡∏ï‡πà‡∏¢‡∏¥‡∏á‡∏ó‡∏∏‡∏Å Request ‡∏Å‡πá‡πÄ‡∏¢‡∏≠‡∏∞‡πÑ‡∏õ
‚îú‚îÄ‚îÄ 1 ‡∏ô‡∏≤‡∏ó‡∏µ‡πÄ‡∏´‡∏°‡∏≤‡∏∞‡∏™‡∏°: ‡∏£‡∏≤‡∏Ñ‡∏≤‡∏≠‡∏±‡∏õ‡πÄ‡∏î‡∏ï‡∏ó‡∏±‡∏ô + ‡πÑ‡∏°‡πà‡πÇ‡∏î‡∏ô Binance ‡πÅ‡∏ö‡∏ô
‚îî‚îÄ‚îÄ ‡πÄ‡∏Å‡πá‡∏ö price + timestamp ‡πÉ‡∏ô map (O(1) lookup)
```

**‡∏ß‡∏¥‡∏ò‡∏µ‡∏≠‡∏ò‡∏¥‡∏ö‡∏≤‡∏¢ Caching ‡∏ï‡∏≠‡∏ô‡∏™‡∏±‡∏°‡∏†‡∏≤‡∏©‡∏ì‡πå:**
> "‡∏ú‡∏°‡πÉ‡∏ä‡πâ In-Memory Cache ‡∏Ñ‡∏£‡∏±‡∏ö ‡πÄ‡∏Å‡πá‡∏ö‡∏ú‡∏•‡∏•‡∏±‡∏û‡∏ò‡πå‡πÑ‡∏ß‡πâ‡πÉ‡∏ô RAM ‡∏Ç‡∏≠‡∏á Server ‡∏Ç‡πà‡∏≤‡∏ß Cache 24 ‡∏ä‡∏°. ‡πÄ‡∏û‡∏£‡∏≤‡∏∞ API ‡∏ü‡∏£‡∏µ‡∏°‡∏µ‡πÇ‡∏Ñ‡∏ß‡∏ï‡πâ‡∏≤‡∏à‡∏≥‡∏Å‡∏±‡∏î ‡∏™‡πà‡∏ß‡∏ô‡∏£‡∏≤‡∏Ñ‡∏≤ Cache 1 ‡∏ô‡∏≤‡∏ó‡∏µ ‡πÄ‡∏û‡∏£‡∏≤‡∏∞‡∏ï‡πâ‡∏≠‡∏á‡∏≠‡∏±‡∏õ‡πÄ‡∏î‡∏ï‡∏ö‡πà‡∏≠‡∏¢‡∏Å‡∏ß‡πà‡∏≤ ‡∏ú‡∏°‡πÉ‡∏ä‡πâ sync.Mutex ‡∏•‡πá‡∏≠‡∏Ñ‡∏Å‡∏≤‡∏£‡πÄ‡∏Ç‡πâ‡∏≤‡∏ñ‡∏∂‡∏á Map ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏õ‡πâ‡∏≠‡∏á‡∏Å‡∏±‡∏ô Race Condition ‡πÄ‡∏°‡∏∑‡πà‡∏≠‡∏´‡∏•‡∏≤‡∏¢ Request ‡πÄ‡∏Ç‡πâ‡∏≤‡∏°‡∏≤‡∏û‡∏£‡πâ‡∏≠‡∏°‡∏Å‡∏±‡∏ô‡∏Ñ‡∏£‡∏±‡∏ö"

---

## 7. üóÑÔ∏è Database Design

### ‡∏ï‡∏≤‡∏£‡∏≤‡∏á users:
```sql
CREATE TABLE users (
    id          SERIAL PRIMARY KEY,
    username    VARCHAR(100) UNIQUE NOT NULL,
    email       VARCHAR(255) UNIQUE NOT NULL,
    password    VARCHAR(255) NOT NULL,  -- bcrypt Hash
    reset_otp   VARCHAR(10),           -- OTP ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö Forgot Password
    reset_otp_expires_at TIMESTAMP,
    created_at  TIMESTAMP DEFAULT NOW(),
    updated_at  TIMESTAMP DEFAULT NOW(),
    deleted_at  TIMESTAMP              -- Soft Delete
);
```

### ‡∏ï‡∏≤‡∏£‡∏≤‡∏á trades:
```sql
CREATE TABLE trades (
    id               SERIAL PRIMARY KEY,
    user_id          INT REFERENCES users(id),  -- ‚≠ê Foreign Key!
    pair             VARCHAR(20) NOT NULL,       -- "BTC/USDT"
    side             VARCHAR(10) NOT NULL,       -- "LONG" / "SHORT"
    entry_price      DECIMAL(24,8),              -- ‚≠ê DECIMAL ‡πÑ‡∏°‡πà‡πÉ‡∏ä‡πà FLOAT!
    exit_price       DECIMAL(24,8),
    stop_loss        DECIMAL(24,8),
    take_profit      DECIMAL(24,8),
    position_size    DECIMAL(24,8),
    quantity         DECIMAL(24,8),
    leverage         INT DEFAULT 1,
    risk_percent     DECIMAL(10,4),
    max_win          DECIMAL(24,8),
    max_loss         DECIMAL(24,8),
    risk_reward_ratio DECIMAL(10,4),
    fee              DECIMAL(24,8),
    entry_reason     TEXT,
    setup_score      INT,                       -- 1-5 ‡∏î‡∏≤‡∏ß
    pnl              DECIMAL(24,8),
    pnl_percent      DECIMAL(10,4),
    status           VARCHAR(20) DEFAULT 'OPEN', -- OPEN, WIN, LOSS, BREAK_EVEN
    notes            TEXT,
    tags             VARCHAR(500),
    deleted_at       TIMESTAMP,                  -- Soft Delete
    created_at       TIMESTAMP DEFAULT NOW(),
    updated_at       TIMESTAMP DEFAULT NOW()
);
```

### ‚≠ê ‡∏ó‡∏≥‡πÑ‡∏°‡πÉ‡∏ä‡πâ DECIMAL(24,8) ‡πÑ‡∏°‡πà‡πÉ‡∏ä‡πà FLOAT?

```
FLOAT ‡∏°‡∏µ‡∏õ‡∏±‡∏ç‡∏´‡∏≤ "‡∏ó‡∏®‡∏ô‡∏¥‡∏¢‡∏°‡πÄ‡∏û‡∏µ‡πâ‡∏¢‡∏ô" ‡πÉ‡∏ô‡∏£‡∏∞‡∏ö‡∏ö‡∏Å‡∏≤‡∏£‡πÄ‡∏á‡∏¥‡∏ô:
  0.1 + 0.2 = 0.30000000000000004 (‡πÑ‡∏°‡πà‡πÉ‡∏ä‡πà 0.3!)

DECIMAL(24,8) ‡πÅ‡∏Å‡πâ‡∏õ‡∏±‡∏ç‡∏´‡∏≤‡∏ô‡∏µ‡πâ:
  24 = ‡∏ï‡∏±‡∏ß‡πÄ‡∏•‡∏Ç‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î‡∏™‡∏π‡∏á‡∏™‡∏∏‡∏î 24 ‡∏´‡∏•‡∏±‡∏Å
  8  = ‡∏ó‡∏®‡∏ô‡∏¥‡∏¢‡∏° 8 ‡∏ï‡∏≥‡πÅ‡∏´‡∏ô‡πà‡∏á
  0.1 + 0.2 = 0.30000000 (‡πÄ‡∏õ‡πä‡∏∞!)

‡∏ó‡∏≥‡πÑ‡∏° 24 ‡∏´‡∏•‡∏±‡∏Å? ‡πÄ‡∏û‡∏£‡∏≤‡∏∞ Crypto ‡∏°‡∏µ‡∏Ñ‡πà‡∏≤:
  BTC  = $97,000.00000000 (‡∏ï‡πâ‡∏≠‡∏á‡∏£‡∏≠‡∏á‡∏£‡∏±‡∏ö‡∏£‡∏≤‡∏Ñ‡∏≤‡∏™‡∏π‡∏á)
  SHIB = $0.00002345     (‡∏ï‡πâ‡∏≠‡∏á‡∏£‡∏≠‡∏á‡∏£‡∏±‡∏ö‡∏ó‡∏®‡∏ô‡∏¥‡∏¢‡∏°‡πÄ‡∏¢‡∏≠‡∏∞)
```

### ON DELETE CASCADE (‡∏ï‡∏≠‡∏ö‡∏Ñ‡∏≥‡∏ñ‡∏≤‡∏°‡∏™‡∏±‡∏°‡∏†‡∏≤‡∏©‡∏ì‡πå):

**‡∏Ñ‡∏≥‡∏ñ‡∏≤‡∏°:** "‡∏•‡∏ö‡πÄ‡∏ó‡∏£‡∏î‡πÅ‡∏•‡πâ‡∏ß TP/SL ‡∏Ñ‡πâ‡∏≤‡∏á‡πÑ‡∏´‡∏°?"

**‡∏Ñ‡∏≥‡∏ï‡∏≠‡∏ö:**
> "‡πÉ‡∏ô‡πÇ‡∏õ‡∏£‡πÄ‡∏à‡∏Ñ‡∏ú‡∏°‡∏ï‡∏≠‡∏ô‡∏ô‡∏µ‡πâ TP/SL ‡πÄ‡∏Å‡πá‡∏ö‡πÄ‡∏õ‡πá‡∏ô‡∏ü‡∏¥‡∏•‡∏î‡πå‡πÄ‡∏î‡∏µ‡∏¢‡∏ß‡πÉ‡∏ô‡∏ï‡∏≤‡∏£‡∏≤‡∏á trades ‡πÄ‡∏•‡∏¢‡∏Ñ‡∏£‡∏±‡∏ö ‡πÄ‡∏û‡∏£‡∏≤‡∏∞ GORM ‡∏à‡∏∞ Soft Delete ‡∏ó‡∏±‡πâ‡∏á‡πÅ‡∏ñ‡∏ß ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÑ‡∏°‡πà‡∏´‡∏≤‡∏¢‡∏à‡∏£‡∏¥‡∏á‡πÅ‡∏Ñ‡πà‡πÉ‡∏™‡πà deleted_at

> ‡πÅ‡∏ï‡πà‡∏ñ‡πâ‡∏≤‡∏à‡∏∞‡πÅ‡∏¢‡∏Å‡∏ï‡∏≤‡∏£‡∏≤‡∏á sl_levels ‡πÅ‡∏•‡∏∞ tp_levels ‡πÅ‡∏ö‡∏ö One-to-Many ‡πÉ‡∏ô‡∏≠‡∏ô‡∏≤‡∏Ñ‡∏ï ‡∏ú‡∏°‡∏à‡∏∞‡πÉ‡∏ä‡πâ ON DELETE CASCADE ‡∏Ñ‡∏£‡∏±‡∏ö ‡∏Ñ‡∏∑‡∏≠‡πÄ‡∏°‡∏∑‡πà‡∏≠‡∏•‡∏ö Trade ‡∏´‡∏•‡∏±‡∏Å ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÉ‡∏ô‡∏ï‡∏≤‡∏£‡∏≤‡∏á‡∏•‡∏π‡∏Å‡∏à‡∏∞‡∏ñ‡∏π‡∏Å‡∏•‡∏ö‡∏ï‡∏≤‡∏°‡πÑ‡∏õ‡∏î‡πâ‡∏ß‡∏¢‡∏≠‡∏±‡∏ï‡πÇ‡∏ô‡∏°‡∏±‡∏ï‡∏¥ ‡πÑ‡∏°‡πà‡πÄ‡∏Å‡∏¥‡∏î‡∏Ç‡∏¢‡∏∞‡πÉ‡∏ô Database

> ‡πÉ‡∏ô GORM ‡∏à‡∏∞‡πÄ‡∏Ç‡∏µ‡∏¢‡∏ô‡∏ß‡πà‡∏≤ `gorm:\"constraint:OnDelete:CASCADE\"` ‡πÉ‡∏ô Struct Tag ‡∏Ñ‡∏£‡∏±‡∏ö"

---

## 8. üîê Security

### 8.1 bcrypt Password Hashing

```
‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ‡∏ï‡∏±‡πâ‡∏á‡∏£‡∏´‡∏±‡∏™: "mypassword123"
    ‚Üì
bcrypt.GenerateFromPassword("mypassword123", cost=12)
    ‚Üì
‡πÄ‡∏Å‡πá‡∏ö‡πÉ‡∏ôDB: "$2a$12$LJ3m4aV..."
    ‚Üì
‡∏ï‡∏≠‡∏ô Login: bcrypt.CompareHashAndPassword("$2a$12$LJ3m4aV...", "mypassword123")
    ‚Üí ‚úÖ ‡∏ï‡∏£‡∏á‡∏Å‡∏±‡∏ô!

‡∏ó‡∏≥‡πÑ‡∏° cost=12?
  cost=10 ‚Üí Hash ‡πÉ‡∏ä‡πâ‡πÄ‡∏ß‡∏•‡∏≤ ~60ms  (‡πÄ‡∏£‡πá‡∏ß‡πÑ‡∏õ Hacker brute force ‡πÑ‡∏î‡πâ)
  cost=12 ‚Üí Hash ‡πÉ‡∏ä‡πâ‡πÄ‡∏ß‡∏•‡∏≤ ~250ms (‡∏ä‡πâ‡∏≤‡∏û‡∏≠‡∏î‡∏µ ‡∏õ‡∏•‡∏≠‡∏î‡∏†‡∏±‡∏¢!)
  cost=14 ‚Üí Hash ‡πÉ‡∏ä‡πâ‡πÄ‡∏ß‡∏•‡∏≤ ~1s    (‡∏ä‡πâ‡∏≤‡πÄ‡∏Å‡∏¥‡∏ô User ‡∏£‡∏≠‡∏ô‡∏≤‡∏ô)
```

### 8.2 JWT Stateless Authentication

```
Stateless ‡πÅ‡∏õ‡∏•‡∏ß‡πà‡∏≤:
  Server ‡πÑ‡∏°‡πà‡∏ï‡πâ‡∏≠‡∏á‡πÄ‡∏Å‡πá‡∏ö Session ‡πÑ‡∏ß‡πâ‡∏ó‡∏µ‡πà‡πÑ‡∏´‡∏ô‡πÄ‡∏•‡∏¢!
  Token ‡∏°‡∏µ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏Ñ‡∏£‡∏ö‡πÉ‡∏ô‡∏ï‡∏±‡∏ß‡πÄ‡∏≠‡∏á (user_id, username, expiry)
  ‡πÅ‡∏Ñ‡πà‡πÄ‡∏ä‡πá‡∏Ñ Signature ‡∏ß‡πà‡∏≤‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á = ‡∏£‡∏π‡πâ‡∏ß‡πà‡∏≤‡πÄ‡∏õ‡πá‡∏ô‡πÉ‡∏Ñ‡∏£

  ‡∏Ç‡πâ‡∏≠‡∏î‡∏µ: Scale ‡πÑ‡∏î‡πâ‡∏á‡πà‡∏≤‡∏¢ ‡∏°‡∏µ 10 Server ‡∏Å‡πá‡πÑ‡∏°‡πà‡∏ï‡πâ‡∏≠‡∏á Share Session
  ‡∏Ç‡πâ‡∏≠‡πÄ‡∏™‡∏µ‡∏¢: ‡πÄ‡∏û‡∏¥‡∏Å‡∏ñ‡∏≠‡∏ô Token ‡∏¢‡∏≤‡∏Å (‡∏ï‡πâ‡∏≠‡∏á‡∏£‡∏≠‡∏´‡∏°‡∏î‡∏≠‡∏≤‡∏¢‡∏∏)
```

### 8.3 Non-root Docker User

```
‡∏ñ‡πâ‡∏≤ Container ‡∏£‡∏±‡∏ô root:
  Hacker ‡πÄ‡∏à‡∏≤‡∏∞‡πÑ‡∏î‡πâ ‚Üí ‡∏™‡∏¥‡∏ó‡∏ò‡∏¥‡πå root ‚Üí ‡∏ó‡∏≥‡∏≠‡∏∞‡πÑ‡∏£‡∏Å‡πá‡πÑ‡∏î‡πâ ‚Üí ‡πÅ‡∏Æ‡πá‡∏Ñ Server ‡∏ó‡∏±‡πâ‡∏á‡∏•‡∏π‡∏Å

‡∏ñ‡πâ‡∏≤ Container ‡∏£‡∏±‡∏ô appuser:
  Hacker ‡πÄ‡∏à‡∏≤‡∏∞‡πÑ‡∏î‡πâ ‚Üí ‡∏™‡∏¥‡∏ó‡∏ò‡∏¥‡πå appuser ‚Üí ‡∏ó‡∏≥‡πÑ‡∏î‡πâ‡πÅ‡∏Ñ‡πà‡πÉ‡∏ô /app ‚Üí ‡∏ó‡∏≥‡∏£‡πâ‡∏≤‡∏¢‡πÑ‡∏°‡πà‡πÑ‡∏î‡πâ‡∏°‡∏≤‡∏Å
```

---

## 9. üöÄ Deployment

```
Architecture ‡∏ö‡∏ô Production:

  ‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ ‚Üí https://mmrrdikub.xyz
          ‚Üì
  Vercel (CDN Edge) ‚Üê Frontend (Next.js)
          ‚Üì API calls
  Render.com ‚Üê Backend (Docker Container = Go Binary)
          ‚Üì SQL queries
  Neon.tech ‚Üê PostgreSQL Database (Cloud)

  APIs:
  ‚îú‚îÄ‚îÄ Binance (‡∏£‡∏≤‡∏Ñ‡∏≤ Crypto Real-time)
  ‚îú‚îÄ‚îÄ CryptoPanic (‡∏Ç‡πà‡∏≤‡∏ß Crypto)
  ‚îî‚îÄ‚îÄ Google Gemini (AI ‡∏ß‡∏¥‡πÄ‡∏Ñ‡∏£‡∏≤‡∏∞‡∏´‡πå)
```

### Environment Variables ‡∏ö‡∏ô Render:
```
DB_URL=postgresql://user:pass@neon.tech/mmrrdikub
GEMINI_API_KEY=AIza...
JWT_SECRET=super_secret_key_never_commit_this
CRYPTOPANIC_API_KEY=xxx
PORT=8080
```

---

## 10. üé§ ‡∏Ñ‡∏≥‡∏ñ‡∏≤‡∏°‡∏™‡∏±‡∏°‡∏†‡∏≤‡∏©‡∏ì‡πå‡∏à‡∏≥‡∏•‡∏≠‡∏á + ‡∏Ñ‡∏≥‡∏ï‡∏≠‡∏ö

### Q1: Docker Multi-Stage Build ‡∏ó‡∏≥‡∏á‡∏≤‡∏ô‡∏¢‡∏±‡∏á‡πÑ‡∏á?
> "Stage ‡πÅ‡∏£‡∏Å‡πÄ‡∏õ‡∏£‡∏µ‡∏¢‡∏ö‡πÄ‡∏´‡∏°‡∏∑‡∏≠‡∏ô‡πÇ‡∏£‡∏á‡∏á‡∏≤‡∏ô ‡∏°‡∏µ Go Compiler ‡∏Ç‡∏ô‡∏≤‡∏î‡∏Å‡∏¥‡∏Å‡∏Å‡∏ß‡πà‡∏≤ Compile ‡πÇ‡∏Ñ‡πâ‡∏î‡πÄ‡∏õ‡πá‡∏ô Binary ‡∏ï‡∏±‡∏ß‡πÄ‡∏î‡∏µ‡∏¢‡∏ß ~15MB Stage ‡∏ó‡∏µ‡πà‡∏™‡∏≠‡∏á ‡πÄ‡∏≠‡∏≤‡πÅ‡∏Ñ‡πà Binary ‡πÑ‡∏õ‡∏ß‡∏≤‡∏á‡∏ö‡∏ô Alpine ‡πÄ‡∏õ‡∏•‡πà‡∏≤‡πÜ ‡∏ú‡∏•‡∏Ñ‡∏∑‡∏≠ Image ‡∏™‡∏∏‡∏î‡∏ó‡πâ‡∏≤‡∏¢‡πÄ‡∏•‡πá‡∏Å‡∏°‡∏≤‡∏Å ‡∏õ‡∏•‡∏≠‡∏î‡∏†‡∏±‡∏¢‡πÄ‡∏û‡∏£‡∏≤‡∏∞‡πÑ‡∏°‡πà‡∏°‡∏µ tools ‡πÉ‡∏´‡πâ Hacker ‡πÉ‡∏ä‡πâ ‡πÅ‡∏ñ‡∏°‡∏£‡∏±‡∏ô‡∏î‡πâ‡∏ß‡∏¢ Non-root user ‡∏Ñ‡∏£‡∏±‡∏ö"

### Q2: ‡∏•‡∏ö Trade ‡πÅ‡∏•‡πâ‡∏ß TP/SL ‡∏Ñ‡πâ‡∏≤‡∏á‡πÑ‡∏´‡∏°?
> "‡∏ú‡∏°‡πÉ‡∏ä‡πâ Soft Delete ‡∏Ñ‡∏£‡∏±‡∏ö ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÑ‡∏°‡πà‡∏ñ‡∏π‡∏Å‡∏•‡∏ö‡∏à‡∏£‡∏¥‡∏á ‡πÅ‡∏Ñ‡πà‡πÉ‡∏™‡πà deleted_at ‡πÉ‡∏´‡πâ GORM ‡∏°‡∏≠‡∏á‡∏Ç‡πâ‡∏≤‡∏° ‡∏ñ‡πâ‡∏≤‡πÅ‡∏¢‡∏Å‡∏ï‡∏≤‡∏£‡∏≤‡∏á‡πÅ‡∏ö‡∏ö One-to-Many ‡πÉ‡∏ô‡∏≠‡∏ô‡∏≤‡∏Ñ‡∏ï ‡∏à‡∏∞‡πÉ‡∏ä‡πâ ON DELETE CASCADE ‡πÉ‡∏´‡πâ‡∏•‡∏ö‡∏ï‡∏≤‡∏°‡∏≠‡∏±‡∏ï‡πÇ‡∏ô‡∏°‡∏±‡∏ï‡∏¥ ‡∏´‡∏£‡∏∑‡∏≠ Soft Delete ‡∏ó‡∏±‡πâ‡∏á 3 ‡∏ï‡∏≤‡∏£‡∏≤‡∏á‡πÑ‡∏õ‡∏û‡∏£‡πâ‡∏≠‡∏°‡∏Å‡∏±‡∏ô‡∏Å‡πá‡πÑ‡∏î‡πâ‡∏Ñ‡∏£‡∏±‡∏ö"

### Q3: RAG Pipeline ‡∏ó‡∏≥‡∏á‡∏≤‡∏ô‡∏¢‡∏±‡∏á‡πÑ‡∏á?
> "RAG ‡∏Ñ‡∏∑‡∏≠‡∏Å‡∏≤‡∏£‡∏î‡∏∂‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏à‡∏£‡∏¥‡∏á‡∏°‡∏≤‡∏õ‡πâ‡∏≠‡∏ô AI ‡∏Å‡πà‡∏≠‡∏ô ‡∏ú‡∏°‡∏î‡∏∂‡∏á 3 ‡∏≠‡∏¢‡πà‡∏≤‡∏á: ‡∏õ‡∏£‡∏∞‡∏ß‡∏±‡∏ï‡∏¥‡πÄ‡∏ó‡∏£‡∏î‡∏à‡∏≤‡∏Å Postgres, ‡∏£‡∏≤‡∏Ñ‡∏≤‡∏õ‡∏±‡∏à‡∏à‡∏∏‡∏ö‡∏±‡∏ô‡∏à‡∏≤‡∏Å Binance API, ‡πÅ‡∏•‡∏∞‡∏Ç‡πà‡∏≤‡∏ß Crypto ‡∏à‡∏≤‡∏Å CryptoPanic ‡∏£‡∏ß‡∏°‡∏ó‡∏∏‡∏Å‡∏≠‡∏¢‡πà‡∏≤‡∏á‡πÄ‡∏õ‡πá‡∏ô Prompt ‡∏™‡πà‡∏á‡πÉ‡∏´‡πâ Gemini ‡∏ó‡∏≥‡πÉ‡∏´‡πâ AI ‡∏ß‡∏¥‡πÄ‡∏Ñ‡∏£‡∏≤‡∏∞‡∏´‡πå‡∏à‡∏≤‡∏Å‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏à‡∏£‡∏¥‡∏á ‡πÑ‡∏°‡πà‡∏°‡∏±‡πà‡∏ß‡∏Ñ‡∏£‡∏±‡∏ö"

### Q4: ‡∏ñ‡πâ‡∏≤ AI API ‡∏•‡πà‡∏°‡∏à‡∏∞‡∏ó‡∏≥‡∏¢‡∏±‡∏á‡πÑ‡∏á?
> "‡∏ú‡∏°‡∏ó‡∏≥ 3-Tier Fallback ‡∏Ñ‡∏£‡∏±‡∏ö ‡∏•‡∏≥‡∏î‡∏±‡∏ö 1 ‡∏•‡∏≠‡∏á Gemini ‡∏ñ‡πâ‡∏≤‡πÇ‡∏Ñ‡∏ß‡∏ï‡πâ‡∏≤‡πÄ‡∏ï‡πá‡∏° ‡∏•‡∏≥‡∏î‡∏±‡∏ö 2 ‡∏™‡∏•‡∏±‡∏ö‡πÑ‡∏õ Pollinations AI ‡∏≠‡∏±‡∏ï‡πÇ‡∏ô‡∏°‡∏±‡∏ï‡∏¥ ‡∏ñ‡πâ‡∏≤‡∏•‡πà‡∏°‡∏≠‡∏µ‡∏Å ‡∏•‡∏≥‡∏î‡∏±‡∏ö 3 ‡πÉ‡∏ä‡πâ Rule-based ‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì RR ‡πÅ‡∏•‡πâ‡∏ß‡∏ï‡∏≠‡∏ö‡∏Å‡∏•‡∏±‡∏ö ‡πÄ‡∏ß‡πá‡∏ö‡∏à‡∏∞‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏ó‡∏≤‡∏á‡∏´‡∏ô‡πâ‡∏≤‡∏Ç‡∏≤‡∏ß‡πÄ‡∏à‡πä‡∏á 100% ‡∏Ñ‡∏£‡∏±‡∏ö"

### Q5: Connection Pool ‡∏Ñ‡∏∑‡∏≠‡∏≠‡∏∞‡πÑ‡∏£? ‡∏ó‡∏≥‡πÑ‡∏°‡∏ï‡πâ‡∏≠‡∏á‡∏°‡∏µ?
> "‡πÅ‡∏ó‡∏ô‡∏ó‡∏µ‡πà‡∏à‡∏∞‡πÄ‡∏õ‡∏¥‡∏î‡∏õ‡∏¥‡∏î DB Connection ‡∏ó‡∏∏‡∏Å‡∏Ñ‡∏£‡∏±‡πâ‡∏á ‡∏ã‡∏∂‡πà‡∏á‡πÄ‡∏õ‡∏•‡∏∑‡∏≠‡∏á ‡∏ú‡∏°‡πÄ‡∏Å‡πá‡∏ö Pool ‡πÑ‡∏ß‡πâ 5-20 ‡∏ï‡∏±‡∏ß Request ‡πÄ‡∏Ç‡πâ‡∏≤‡∏°‡∏≤‡∏´‡∏¢‡∏¥‡∏ö‡πÑ‡∏õ‡πÉ‡∏ä‡πâ ‡πÄ‡∏™‡∏£‡πá‡∏à‡πÅ‡∏•‡πâ‡∏ß‡∏Ñ‡∏∑‡∏ô ‡∏ß‡πà‡∏≤‡∏á‡πÄ‡∏Å‡∏¥‡∏ô 10 ‡∏ô‡∏≤‡∏ó‡∏µ‡∏õ‡∏¥‡∏î‡∏ó‡∏¥‡πâ‡∏á ‡∏ñ‡πâ‡∏≤‡πÑ‡∏°‡πà‡∏°‡∏µ Pool Request 100 ‡∏û‡∏£‡πâ‡∏≠‡∏°‡∏Å‡∏±‡∏ô = ‡πÄ‡∏õ‡∏¥‡∏î 100 Connection = Database ‡∏Å‡∏£‡∏∞‡∏≠‡∏±‡∏Å ‡∏Ñ‡∏£‡∏±‡∏ö"

### Q6: ‡∏ó‡∏≥‡πÑ‡∏°‡πÉ‡∏ä‡πâ DECIMAL ‡πÑ‡∏°‡πà‡πÉ‡∏ä‡πà FLOAT?
> "FLOAT ‡∏°‡∏µ‡∏õ‡∏±‡∏ç‡∏´‡∏≤‡∏ó‡∏®‡∏ô‡∏¥‡∏¢‡∏°‡πÄ‡∏û‡∏µ‡πâ‡∏¢‡∏ô‡∏Ñ‡∏£‡∏±‡∏ö 0.1 + 0.2 = 0.30000...004 ‡πÉ‡∏ô‡∏£‡∏∞‡∏ö‡∏ö‡∏Å‡∏≤‡∏£‡πÄ‡∏á‡∏¥‡∏ô‡∏ú‡∏¥‡∏î‡πÅ‡∏°‡πâ‡πÅ‡∏ï‡πà‡∏™‡∏ï‡∏≤‡∏á‡∏Ñ‡πå‡πÄ‡∏î‡∏µ‡∏¢‡∏ß‡∏Å‡πá‡∏¢‡∏≠‡∏°‡∏£‡∏±‡∏ö‡πÑ‡∏°‡πà‡πÑ‡∏î‡πâ DECIMAL(24,8) ‡πÄ‡∏Å‡πá‡∏ö‡∏Ñ‡πà‡∏≤‡πÄ‡∏õ‡πä‡∏∞ 8 ‡∏ó‡∏®‡∏ô‡∏¥‡∏¢‡∏° ‡∏£‡∏≠‡∏á‡∏£‡∏±‡∏ö‡∏ó‡∏±‡πâ‡∏á BTC ‡∏£‡∏≤‡∏Ñ‡∏≤‡∏´‡∏°‡∏∑‡πà‡∏ô‡∏î‡∏≠‡∏•‡∏•‡∏≤‡∏£‡πå ‡πÅ‡∏•‡∏∞ SHIB ‡∏ó‡∏µ‡πà‡∏ó‡∏®‡∏ô‡∏¥‡∏¢‡∏°‡∏´‡∏•‡∏≤‡∏¢‡∏ï‡∏≥‡πÅ‡∏´‡∏ô‡πà‡∏á‡∏Ñ‡∏£‡∏±‡∏ö"

### Q7: JWT Stateless ‡∏ï‡πà‡∏≤‡∏á‡∏à‡∏≤‡∏Å Session ‡∏¢‡∏±‡∏á‡πÑ‡∏á?
> "Session ‡∏ï‡πâ‡∏≠‡∏á‡πÄ‡∏Å‡πá‡∏ö‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÑ‡∏ß‡πâ‡∏ó‡∏µ‡πà Server ‡∏ñ‡πâ‡∏≤‡∏°‡∏µ 10 Server ‡∏ï‡πâ‡∏≠‡∏á Share Session Store ‡∏¢‡∏∏‡πà‡∏á‡∏¢‡∏≤‡∏Å JWT Stateless ‡πÑ‡∏°‡πà‡∏ï‡πâ‡∏≠‡∏á‡πÄ‡∏Å‡πá‡∏ö‡∏≠‡∏∞‡πÑ‡∏£‡∏ó‡∏µ‡πà Server ‡πÄ‡∏•‡∏¢ Token ‡∏°‡∏µ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏Ñ‡∏£‡∏ö‡πÉ‡∏ô‡∏ï‡∏±‡∏ß ‡πÅ‡∏Ñ‡πà‡πÄ‡∏ä‡πá‡∏Ñ Signature ‡∏Å‡πá‡∏£‡∏π‡πâ‡∏ß‡πà‡∏≤‡πÄ‡∏õ‡πá‡∏ô‡πÉ‡∏Ñ‡∏£ Scale ‡πÑ‡∏î‡πâ‡∏á‡πà‡∏≤‡∏¢‡∏°‡∏≤‡∏Å‡∏Ñ‡∏£‡∏±‡∏ö"

### Q8: CORS ‡∏Ñ‡∏∑‡∏≠‡∏≠‡∏∞‡πÑ‡∏£? ‡∏ó‡∏≥‡πÑ‡∏°‡∏ï‡πâ‡∏≠‡∏á‡∏ï‡∏±‡πâ‡∏á?
> "CORS ‡∏õ‡πâ‡∏≠‡∏á‡∏Å‡∏±‡∏ô‡πÑ‡∏°‡πà‡πÉ‡∏´‡πâ‡πÄ‡∏ß‡πá‡∏ö‡∏≠‡∏∑‡πà‡∏ô‡∏¢‡∏¥‡∏á API ‡∏Ç‡∏≠‡∏á‡πÄ‡∏£‡∏≤ ‡πÄ‡∏û‡∏£‡∏≤‡∏∞ Frontend ‡∏≠‡∏¢‡∏π‡πà port 3000 Backend ‡∏≠‡∏¢‡∏π‡πà port 8080 ‡∏ñ‡∏∑‡∏≠‡∏ß‡πà‡∏≤‡∏Ñ‡∏ô‡∏•‡∏∞ Origin ‡∏ú‡∏°‡πÄ‡∏•‡∏¢‡∏ï‡∏±‡πâ‡∏á CORS ‡πÉ‡∏´‡πâ‡∏≠‡∏ô‡∏∏‡∏ç‡∏≤‡∏ï‡πÄ‡∏â‡∏û‡∏≤‡∏∞ localhost:3000, *.vercel.app, ‡πÅ‡∏•‡∏∞ *.xyz ‡∏Ñ‡∏£‡∏±‡∏ö ‡πÄ‡∏ß‡πá‡∏ö‡∏≠‡∏∑‡πà‡∏ô‡∏¢‡∏¥‡∏á‡∏°‡∏≤‡∏à‡∏∞‡πÇ‡∏î‡∏ô‡∏ö‡∏•‡πá‡∏≠‡∏Ñ"

### Q9: Middleware ‡∏ó‡∏≥‡∏´‡∏ô‡πâ‡∏≤‡∏ó‡∏µ‡πà‡∏≠‡∏∞‡πÑ‡∏£?
> "Middleware ‡πÄ‡∏õ‡∏£‡∏µ‡∏¢‡∏ö‡πÄ‡∏´‡∏°‡∏∑‡∏≠‡∏ô‡∏î‡πà‡∏≤‡∏ô‡∏ï‡∏£‡∏ß‡∏à‡∏Å‡πà‡∏≠‡∏ô‡πÄ‡∏Ç‡πâ‡∏≤‡∏ö‡πâ‡∏≤‡∏ô ‡∏ó‡∏∏‡∏Å Request ‡∏ó‡∏µ‡πà‡πÑ‡∏õ /api/trades ‡∏´‡∏£‡∏∑‡∏≠ /api/ai ‡∏ï‡πâ‡∏≠‡∏á‡∏ú‡πà‡∏≤‡∏ô JWTMiddleware ‡∏Å‡πà‡∏≠‡∏ô ‡∏°‡∏±‡∏ô‡∏à‡∏∞‡πÄ‡∏ä‡πá‡∏Ñ‡∏ß‡πà‡∏≤‡∏°‡∏µ Token ‡πÑ‡∏´‡∏°? ‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á‡πÑ‡∏´‡∏°? ‡∏´‡∏°‡∏î‡∏≠‡∏≤‡∏¢‡∏∏‡∏¢‡∏±‡∏á? ‡∏ñ‡πâ‡∏≤‡∏ú‡πà‡∏≤‡∏ô ‡πÉ‡∏™‡πà userID ‡∏•‡∏á Context ‡πÅ‡∏•‡πâ‡∏ß‡∏™‡πà‡∏á‡∏ï‡πà‡∏≠‡πÑ‡∏õ Handler ‡∏à‡∏£‡∏¥‡∏á ‡∏ñ‡πâ‡∏≤‡πÑ‡∏°‡πà‡∏ú‡πà‡∏≤‡∏ô‡∏Å‡πá Return 401 ‡∏Å‡∏•‡∏±‡∏ö‡πÑ‡∏õ‡πÄ‡∏•‡∏¢‡∏Ñ‡∏£‡∏±‡∏ö"

### Q10: Cache ‡πÉ‡∏ô AI ‡∏ó‡∏≥‡∏á‡∏≤‡∏ô‡∏¢‡∏±‡∏á‡πÑ‡∏á?
> "‡∏ú‡∏°‡πÉ‡∏ä‡πâ In-Memory Cache ‡πÄ‡∏Å‡πá‡∏ö‡πÉ‡∏ô Go map ‡∏Ñ‡∏£‡∏±‡∏ö ‡∏Ç‡πà‡∏≤‡∏ß Cache 24 ‡∏ä‡∏±‡πà‡∏ß‡πÇ‡∏°‡∏á ‡πÄ‡∏û‡∏£‡∏≤‡∏∞ CryptoPanic ‡∏ü‡∏£‡∏µ‡πÉ‡∏´‡πâ 100 ‡∏Ñ‡∏£‡∏±‡πâ‡∏á/‡πÄ‡∏î‡∏∑‡∏≠‡∏ô ‡∏£‡∏≤‡∏Ñ‡∏≤ Cache 1 ‡∏ô‡∏≤‡∏ó‡∏µ ‡πÄ‡∏û‡∏£‡∏≤‡∏∞‡∏ï‡πâ‡∏≠‡∏á‡∏≠‡∏±‡∏õ‡πÄ‡∏î‡∏ï‡∏ö‡πà‡∏≠‡∏¢ ‡πÉ‡∏ä‡πâ sync.Mutex ‡∏•‡πá‡∏≠‡∏Ñ Map ‡∏õ‡πâ‡∏≠‡∏á‡∏Å‡∏±‡∏ô Race Condition ‡πÄ‡∏°‡∏∑‡πà‡∏≠‡∏´‡∏•‡∏≤‡∏¢ Request ‡πÄ‡∏Ç‡πâ‡∏≤‡∏û‡∏£‡πâ‡∏≠‡∏°‡∏Å‡∏±‡∏ô ‡πÑ‡∏°‡πà‡πÉ‡∏ä‡πâ Redis ‡πÄ‡∏û‡∏£‡∏≤‡∏∞‡πÑ‡∏°‡πà‡∏Ñ‡∏∏‡πâ‡∏°‡∏Å‡∏±‡∏ö‡∏™‡πÄ‡∏Å‡∏•‡πÇ‡∏õ‡∏£‡πÄ‡∏à‡∏Ñ‡∏ô‡∏µ‡πâ‡∏Ñ‡∏£‡∏±‡∏ö"

---

## üß† ‡∏™‡∏£‡∏∏‡∏õ‡∏ó‡πâ‡∏≤‡∏¢ ‚Äî ‡∏à‡∏∏‡∏î‡πÄ‡∏î‡πà‡∏ô‡∏ó‡∏µ‡πà‡∏ï‡πâ‡∏≠‡∏á‡∏à‡∏≥

| ‡∏´‡∏±‡∏ß‡∏Ç‡πâ‡∏≠ | ‡∏à‡∏∏‡∏î‡πÄ‡∏î‡πà‡∏ô |
|--------|---------|
| **Docker** | Multi-stage Build (‡∏à‡∏≤‡∏Å 1GB ‡πÄ‡∏´‡∏•‡∏∑‡∏≠ ~20MB) + Non-root + Health Check |
| **Backend** | Go Fiber (‡πÄ‡∏£‡πá‡∏ß‡∏Å‡∏ß‡πà‡∏≤ Express 5-10x) + Connection Pool |
| **Security** | bcrypt (cost=12) + JWT Stateless + Non-root Docker |
| **AI** | RAG Pipeline (Real-time data) + 3-Tier Fallback (‡πÑ‡∏°‡πà‡∏•‡πà‡∏°‡πÄ‡∏î‡πá‡∏î‡∏Ç‡∏≤‡∏î) |
| **Database** | DECIMAL(24,8) ‡∏Å‡∏±‡∏ô‡∏ó‡∏®‡∏ô‡∏¥‡∏¢‡∏°‡πÄ‡∏û‡∏µ‡πâ‡∏¢‡∏ô + Soft Delete ‡∏Å‡∏±‡∏ô‡∏•‡∏ö‡∏ú‡∏¥‡∏î |
| **Caching** | In-Memory Cache + sync.Mutex ‡∏Å‡∏±‡∏ô Race Condition |
| **CORS** | Dynamic Origin check (‡∏£‡∏≠‡∏á‡∏£‡∏±‡∏ö‡∏ó‡∏±‡πâ‡∏á Dev + Production) |

> **‡πÄ‡∏õ‡∏¥‡∏î‡πÇ‡∏Ñ‡πâ‡∏î‡πÉ‡∏´‡πâ‡∏î‡∏π‡πÑ‡∏î‡πâ:** ‡∏ó‡∏∏‡∏Å‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô ‡∏ó‡∏∏‡∏Å Logic ‡∏ó‡∏µ‡πà‡πÄ‡∏Ç‡∏µ‡∏¢‡∏ô‡πÑ‡∏ß‡πâ‡πÉ‡∏ô‡πÑ‡∏ü‡∏•‡πå‡∏ô‡∏µ‡πâ ‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡πÄ‡∏õ‡∏¥‡∏î‡πÑ‡∏ü‡∏•‡πå‡∏à‡∏£‡∏¥‡∏á‡πÉ‡∏ô VSCode ‡∏ä‡∏µ‡πâ‡πÉ‡∏´‡πâ‡∏Å‡∏£‡∏£‡∏°‡∏Å‡∏≤‡∏£‡∏î‡∏π‡πÑ‡∏î‡πâ‡∏ó‡∏±‡∏ô‡∏ó‡∏µ!
